{"version":3,"sources":["theme/Card.jsx","components/forms/ParentStateUpdater.jsx","utils/inputValidationSchemes.js","components/forms/FieldArrayInput.jsx","components/forms/PartyStrengthsFieldArray.jsx","components/forms/PresetButton.jsx","components/forms/PartyStrengthsInput.jsx","components/forms/MethodsInput.jsx","views/AzurDefault/Input/AzurForm.jsx","views/AzurDefault/Input/Input.jsx","utils/getPartyColor.js","components/PieChart.jsx","views/AzurDefault/Output/DistributionOutput.jsx","components/tables/CellRenders.jsx","components/tables/NumberRangeFilter.jsx","components/tables/Pagination.jsx","components/tables/RawTable.jsx","components/tables/DataTable.jsx","views/AzurDefault/Output/AssignmentSeq.jsx","views/AzurDefault/Output/TableOutput.jsx","views/AzurDefault/Print/PrintTable.jsx","views/AzurDefault/Print/PrintWrapper.jsx","views/AzurDefault/Output/ExportIcons.jsx","views/AzurDefault/Output/OutputTabs.jsx","views/AzurDefault/Output/Output.jsx","views/AzurDefault/AzurDefault.jsx","views/AzurDefault/hooks/useAzur.js","App.js","theme/fonts.js","theme/Table.js","theme/themes.js","index.js"],"names":["Card","variant","rest","styles","useStyleConfig","__css","ParentStateUpdater","inputData","setInputData","useFormikContext","values","validateForm","debouncedSetAzur","React","useCallback","_","debounce","a","errors","isEmpty","data","num_of_seats","otherInputs","inputCopy","numSeats","isEqual","useEffect","numSeatsSchema","Yup","typeError","integer","required","min","max","partyStrengthsSchema","of","shape","name","strength","test","partyStrengths","namesList","map","Set","size","length","methodSchema","FieldArrayInput","fieldArrayName","index","fieldKey","fieldType","cssprops","FieldInput","errorMsg","errorForFieldExists","get","type","as","Input","layerStyle","title","arrayErrors","Array","isArray","Object","prototype","hasOwnProperty","call","PartyStrengthsFieldArray","MAX_FRACTIONS","errorsPartyStrengths","remove","push","flexDirection","flexGrow","width","ml","textAlign","isDisabled","m","onClick","_hover","backgroundColor","px","disabled","pointerEvents","color","PresetButton","activeValue","presetData","attributeName","setFieldValue","children","PartyStrengthsInput","attributeKey","partyStrengthsKey","PartyStrengthsPresetButtons","columnGap","rowGap","templateColumns","bundestagMandatsverteilung","mandatePreset","label","key","MethodsInput","constants","azurMethods","method","apiName","AzurForm","fontSize","p","py","height","alignItems","spacing","AzurInputs","azurInput","setAzurInput","initialValues","schema","validationSchema","validateOnChange","validateOnBlur","getPartyColor","partyName","partyArrayLength","colorScale","d3","domain","range","partyColors","partyAltNamesMapping","PieChart","outerRadius","innerRadius","parsedData","entries","value","select","svg","append","attr","arcGenerator","pieGenerator","padAngle","d","selectAll","enter","style","arc","i","text","drawChart","id","display","DistributionOutput","isAmbiguous","seatSplit","sizes","useTheme","innerWidthPx","convertRemToPixels","outerWidthPx","partyNamesSorted","entry","seatSplitSorted","forEach","my","keys","fractionName","fractionStrength","join","status","mr","rem","parseFloat","getComputedStyle","document","documentElement","PositionCell","cell","justifyContent","bg","fontWeight","SeatCountCell","SeatCountCellBase","parseSeatCountOutput","has","row","original","seat_goes_to","column","Header","NumberRangeColumnFilter","filterValue","preFilteredRows","setFilter","useMemo","align","onChange","e","val","target","old","parseInt","undefined","placeholder","PageSelect","pageOptions","gotoPage","pageIndex","state","flexShrink","w","mx","defaultValue","SelectPageLength","pageSize","setPageSize","Number","RawTable","getTableProps","getTableBodyProps","headerGroups","prepareRow","page","getRowProps","maxWidth","headerGroup","getHeaderGroupProps","headers","getHeaderProps","render","header","cells","getCellProps","DataTable","columns","defaultColumn","disableFilters","startHeaders","accessor","_row","Cell","defaultCanFilter","Filter","NumberRangeFilter","filter","dataMemo","colsMemo","concat","useTable","useFilters","usePagination","AssignmentSeq","assignmentSequence","tableData","partyNames","seats","totalPartyCount","findIndex","elem","partyColor","CircleIcon","props","viewBox","fill","flex","boxSize","AssignmentCell","TableOutput","isNumeric","tableRow","is_ambiguous","PrintTable","tableOutput","slice","rowIndex","colIndex","PrintWrapper","forwardRef","ref","azurResponse","table","methodUsed","methodTitle","find","ExportIcons","componentRef","useRef","handlePrint","useReactToPrint","content","current","OutputTabs","loading","tabIndex","setTabIndex","useState","selectedStyle","boderColor","border","borderBottom","boxShadow","mt","_selected","minHeight","distribution","assignment_sequence","Output","azurError","message","errorEntry","AzurDefault","setData","setLoading","error","setError","fetchAzur","azurInputUpdate","partyStrengthForApi","fetch","body","JSON","stringify","votes","return_table","then","resp","ok","json","errorMessage","Error","catch","fetchingError","console","log","finally","useAzur","margin","maxHeight","App","useDisclosure","isOpen","onOpen","onClose","className","href","colorScheme","FontFaces","Table","baseStyle","overflowX","borderCollapse","th","textTransform","td","md","lg","variants","stickyHeader","overflow","thead","position","top","defaultProps","bundestagTheme","extendTheme","components","Button","padding","whiteSpace","wordWrap","borderRadius","active","borderColor","parts","field","outline","outlineColor","fakeInput","Heading","mb","xl","Tabs","tabpanel","tab","overflowY","ghost","colors","brand","primary","orange","orangeAlpha","darkBlue","darkBlueAlpha","backgroundGrey","fonts","heading","fontSizes","xs","sm","layerStyles","errorGlow","ambiguityContainerHighlight","changedRowHighlight","ambigousRowHighlight","ReactDOM","StrictMode","resetCSS","theme","getElementById"],"mappings":"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","file":"static/js/main.d1cae0d9.chunk.js","sourcesContent":["import { Box, useStyleConfig } from \"@chakra-ui/react\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nCard.propTypes = { variant: PropTypes.string };\n\nfunction Card({ variant, ...rest }) {\n  const styles = useStyleConfig(\"Card\", { variant });\n  return <Box __css={styles} {...rest} />;\n}\n\nexport default Card;\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { useFormikContext } from \"formik\";\n\nconst ParentStateUpdater = ({ inputData, setInputData }) => {\n  const DEBOUNCE_DELAY = 550; // we wait for additional input for 300ms before  updating the input\n\n  const { values, validateForm } = useFormikContext();\n  const debouncedSetAzur = React.useCallback(\n    _.debounce(async (values, validateForm, inputData, setInputData) => {\n      // validate input changes for form\n      const errors = await validateForm();\n\n      if (_.isEmpty(errors)) {\n        // Update to values and no error exists\n        // rename numSeats for equality check\n        const { num_of_seats, ...otherInputs } = inputData?.data;\n        const inputCopy = { ...otherInputs, numSeats: num_of_seats };\n\n        if (_.isEqual(inputCopy, values)) {\n          return null;\n        }\n        // an actual value change occured ->  update the parent state\n        setInputData({\n          errors: {},\n          data: {\n            ...values,\n            num_of_seats: values.numSeats,\n          },\n        });\n      } else {\n        // There is an error in the form input\n        if (_.isEqual(inputData.errors, errors)) {\n          return null;\n        }\n        // an actual error change occured ->  update the parent state\n        setInputData({\n          errors,\n          data: {},\n        });\n      }\n    }, DEBOUNCE_DELAY),\n    []\n  );\n\n  React.useEffect(() => {\n    debouncedSetAzur(values, validateForm, inputData, setInputData);\n  }, [values]);\n  return null;\n};\n\nexport default ParentStateUpdater;\n","import * as Yup from \"yup\";\n\n\nexport const numSeatsSchema = Yup.number()\n  .typeError(\"Dieses Feld darf lediglich Zahlen enthalten\")\n  .integer(\"Dieses Feld darf lediglich ganze Zahlen enthalten\")\n  .required(\"Dieses Feld muss ausgefüllt sein\")\n  .min(1, \"Die Anzahl der Einheiten muss größer als 1 sein.\")\n  .max(\n    100_000,\n    \"Berechnungen von mehr als 100 000 Einheiten wird nicht unterstützt\"\n  );\n\nexport const partyStrengthsSchema = Yup.array()\n  .of(\n    Yup.object().shape({\n      name: Yup.string()\n        .min(1, \"Mindestens ein Buchstabe als Name ist notwendig\")\n        .required(\"Dieses Feld muss ausgefüllt sein\"),\n      strength: Yup.number().integer(\"Dieses Feld darf lediglich Zahlen enthalten\")\n        .typeError(\"Dieses Feld darf lediglich ganze Zahlen enthalten\")\n        .required(\"Dieses Feld muss ausgefüllt sein\")\n        .min(0, \"Das Stärkeverhältnis muss größer als 0 sein.\")\n        .max(1_000_000_000, \"Jeder Fraktion dürfen maximal 1 000 000 000 Stimmen zukommen\")\n    })\n  )\n  .required(\"Es wird ein Input für die Fraktionsstärken benötigt\")\n  .min(1, \"Es wird mindestens eine Fraktion benötigt.\")\n  .test('test_for_duplicates', 'Es werden zwei Fraktionen mit dem selben Namen aufgeführt.', (partyStrengths) => {\n    const namesList = partyStrengths.map(({name}) => name)\n    return (new Set(namesList).size === namesList.length) // returns true if no duplicates exist\n  })\n\nexport const methodSchema = Yup.string().required(\"Dieses Feld wird benötigt.\")","import { Field } from \"formik\";\nimport { Input } from \"@chakra-ui/react\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport _ from \"lodash\";\n\nFieldArrayInput.propTypes = {\n  fieldArrayName: PropTypes.string,\n  index: PropTypes.number,\n  fieldKey: PropTypes.string,\n  fieldType: PropTypes.string,\n  errors: PropTypes.object,\n};\n\nexport function FieldArrayInput({\n  fieldArrayName,\n  index,\n  fieldKey,\n  fieldType,\n  errors,\n  ...cssprops\n}) {\n  return (\n    <FieldInput\n      name={`${fieldArrayName}.${index}.${fieldKey}`}\n      errorMsg={\n        errorForFieldExists(_.get(errors, fieldArrayName), index, fieldKey)\n          ? _.get(errors, fieldArrayName)[index][fieldKey]\n          : null\n      }\n      type={fieldType}\n      {...cssprops}\n    />\n  );\n}\n\nFieldInput.propTypes = {\n  name: PropTypes.string,\n  errorMsg: PropTypes.string,\n  type: PropTypes.string,\n};\n\nexport function FieldInput({ name, errorMsg, type, ...cssprops }) {\n  return (\n    <Field\n      as={Input}\n      name={name}\n      layerStyle={errorMsg != null ? \"errorGlow\" : \"\"}\n      title={errorMsg != null ? errorMsg : \"\"}\n      type={type}\n      {...cssprops}\n    />\n  );\n}\n\nconst errorForFieldExists = (arrayErrors, index, fieldKey) => {\n  if (\n    arrayErrors != null &&\n    Array.isArray(arrayErrors) &&\n    Object.prototype.hasOwnProperty.call(arrayErrors, index) &&\n    arrayErrors[index][fieldKey] != null\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n};\n","import React from \"react\";\nimport { FieldArray } from \"formik\";\n\nimport { IoMdRemove } from \"react-icons/io\";\nimport { FieldArrayInput } from \"./FieldArrayInput\";\nimport PropTypes from \"prop-types\";\n\nimport { Box, Flex, Stack, Input, Button, Text } from \"@chakra-ui/react\";\nimport _ from \"lodash\";\n\nconst PartyStrengthsFieldArray = ({\n  values,\n  errors,\n  fieldArrayName,\n  MAX_FRACTIONS,\n}) => {\n  const partyStrengths = _.get(values, fieldArrayName);\n  const errorsPartyStrengths = _.get(errors, fieldArrayName);\n\n  return (\n    <Box>\n      <FieldArray name={fieldArrayName}>\n        {({ remove, push }) => (\n          <Stack\n            layerStyle={\n              errorsPartyStrengths != null &&\n              typeof errorsPartyStrengths === \"string\"\n                ? \"errorGlow\"\n                : \"\"\n            }\n            title={\n              errorsPartyStrengths != null &&\n              typeof errorsPartyStrengths === \"string\"\n                ? errorsPartyStrengths\n                : \"Fraktionsstärken\"\n            }\n          >\n            {partyStrengths.length > 0 &&\n              partyStrengths.map((_, index) => (\n                <Flex key={index} flexDirection=\"row\">\n                  <FieldArrayInput\n                    fieldKey=\"name\"\n                    fieldArrayName={fieldArrayName}\n                    index={index}\n                    fieldType=\"text\"\n                    errors={errors}\n                    flexGrow=\"3\"\n                    width=\"0px\" //overwrites default size=20 prop from html (min length of 20 chars)\n                    ml={0}\n                  />\n                  <FieldArrayInput\n                    fieldKey=\"strength\"\n                    fieldArrayName={fieldArrayName}\n                    index={index}\n                    width=\"0px\"\n                    flexGrow=\"1\"\n                    fieldType=\"number\"\n                    textAlign=\"center\"\n                    errors={errors}\n                  />\n                  <Button\n                    variant=\"ghost\"\n                    isDisabled={partyStrengths.length <= 1}\n                    m={0}\n                    width=\"3ex\"\n                    title={\n                      partyStrengths.length > 1\n                        ? \"Fraktion entfernen\"\n                        : \"Fraktion kann nicht entfernt werden, da es mindestens eine Fraktion geben muss.\"\n                    }\n                    onClick={() => remove(index)}\n                  >\n                    <IoMdRemove />\n                  </Button>\n                </Flex>\n              ))}\n\n            {/*ADD FRACTION*/}\n            <Button\n              variant=\"ghost\"\n              _hover={{\n                backgroundColor: \"brand.darkBlueAlpha.300\",\n              }}\n              px={0}\n              m={0}\n              width={\"100%\"}\n              isDisabled={partyStrengths.length >= MAX_FRACTIONS}\n              title={\n                partyStrengths.length < MAX_FRACTIONS\n                  ? \"Fraktion hinzufügen\"\n                  : `Es können keine weiteren Fraktion hinzugefügt werden. Dieser Rechner unterstützt maximal ${MAX_FRACTIONS} Einträge für Fraktionen.`\n              }\n              onClick={() => push({ name: \"Fraktion XYZ\", strength: 0 })}\n            >\n              <Flex flexDirection=\"row\" m={0} width={\"100%\"}>\n                <Input\n                  ml={0}\n                  width=\"0px\"\n                  flexGrow=\"3\"\n                  disabled\n                  variant=\"fakeInput\"\n                />\n                <Input width=\"0px\" flexGrow=\"1\" disabled variant=\"fakeInput\" />\n                <Button\n                  width=\"3ex\"\n                  as=\"span\"\n                  m={0}\n                  variant=\"ghost\"\n                  pointerEvents=\"none\"\n                >\n                  <Text color=\"blackAlpha.400\">+</Text>\n                </Button>\n              </Flex>\n            </Button>\n          </Stack>\n        )}\n      </FieldArray>\n    </Box>\n  );\n};\n\nPartyStrengthsFieldArray.propTypes = {\n  values: PropTypes.object,\n  errors: PropTypes.object,\n  fieldArrayName: PropTypes.string,\n  MAX_FRACTIONS: PropTypes.number,\n};\n\nexport default PartyStrengthsFieldArray;\n","import React from \"react\";\nimport { Button } from \"@chakra-ui/react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\n\nPresetButton.propTypes = {\n  setFieldValue: PropTypes.func,\n  activeValue: PropTypes.any,\n  presetData: PropTypes.any,\n  attributeName: PropTypes.string,\n  children: PropTypes.string,\n};\n\nexport default function PresetButton({\n  activeValue,\n  presetData,\n  attributeName,\n  setFieldValue,\n  children,\n  ...cssprops\n}) {\n  return (\n    <Button\n      variant={`${_.isEqual(activeValue, presetData) ? \"active\" : \"outline\"}`}\n      onClick={() => {\n        setFieldValue(attributeName, presetData);\n      }}\n      {...cssprops}\n    >\n      {children}\n    </Button>\n  );\n}\n","import { Heading, Grid, GridItem, Box } from \"@chakra-ui/react\";\nimport PartyStrengthsFieldArray from \"components/forms/PartyStrengthsFieldArray\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport bundestagMandatsverteilung from \"utils/bundestagMandate.json\";\nimport PresetButton from \"./PresetButton\";\nimport PropTypes from \"prop-types\";\n\nconst PartyStrengthsInput = ({\n  values,\n  errors,\n  setFieldValue,\n  MAX_FRACTIONS,\n  attributeKey,\n}) => {\n  return (\n    <Box>\n      <Heading as=\"h4\" size=\"lg\">\n        Voreinstellungen\n      </Heading>\n      <PartyStrengthsPresetButtons\n        values={values}\n        setFieldValue={setFieldValue}\n        partyStrengthsKey={attributeKey}\n      />\n      <Heading as=\"h4\" size=\"lg\">\n        Manuelle Eingabe\n      </Heading>\n      <PartyStrengthsFieldArray\n        fieldArrayName={attributeKey}\n        values={values}\n        errors={errors}\n        MAX_FRACTIONS={MAX_FRACTIONS}\n      />\n    </Box>\n  );\n};\n\nPartyStrengthsInput.propTypes = {\n  values: PropTypes.object,\n  errors: PropTypes.object,\n  setFieldValue: PropTypes.func,\n  MAX_FRACTIONS: PropTypes.number,\n  attributeKey: PropTypes.string,\n};\n\nexport default PartyStrengthsInput;\n\nconst PartyStrengthsPresetButtons = ({\n  values,\n  setFieldValue,\n  partyStrengthsKey,\n}) => {\n  return (\n    <Grid\n      columnGap={3}\n      rowGap={3}\n      templateColumns=\"repeat(auto-fit, minmax(15ex, 1fr))\" // TODO back to minmax( 15ex or have them always take full width)\n    >\n      {bundestagMandatsverteilung.map((mandatePreset) => (\n        <GridItem key={mandatePreset.key}>\n          <PresetButton\n            activeValue={_.get(values, partyStrengthsKey, [])}\n            presetData={mandatePreset.data}\n            attributeName={partyStrengthsKey}\n            setFieldValue={setFieldValue}\n            width=\"100%\"\n            m={0}\n            title={\n              mandatePreset?.label != null\n                ? mandatePreset.label\n                : \"Voreinstellung für Fraktionsstärken - Klicken um zu aktivieren\"\n            }\n          >\n            {mandatePreset.title}\n          </PresetButton>\n        </GridItem>\n      ))}\n    </Grid>\n  );\n};\n\nPartyStrengthsPresetButtons.propTypes = {\n  values: PropTypes.object,\n  setFieldValue: PropTypes.func,\n  partyStrengthsKey: PropTypes.string,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Heading, Grid, GridItem } from \"@chakra-ui/react\";\nimport constants from \"utils/constants.json\";\nimport PresetButton from \"./PresetButton\";\nimport _ from \"lodash\";\n\nconst MethodsInput = ({ values, attributeKey, setFieldValue }) => {\n  return (\n    <>\n      <Heading as=\"h3\" size=\"xl\">\n        Mathematische Verfahren\n      </Heading>\n      <Grid\n        columnGap={3}\n        rowGap={3}\n        templateColumns=\"repeat(auto-fit, minmax(15ex, 1fr))\"\n      >\n        {constants.azurMethods.map((method) => {\n          return (\n            <GridItem key={method.apiName}>\n              <PresetButton\n                activeValue={_.get(values, attributeKey, [])}\n                presetData={method.apiName}\n                attributeName={attributeKey}\n                setFieldValue={setFieldValue}\n                width=\"100%\"\n              >\n                {method.title}\n              </PresetButton>\n            </GridItem>\n          );\n        })}\n      </Grid>\n    </>\n  );\n};\n\nMethodsInput.propTypes = {\n  values: PropTypes.object,\n  attributeKey: PropTypes.string,\n  setFieldValue: PropTypes.func,\n};\n\nexport default MethodsInput;\n","import { Center, Text, Tooltip, HStack, Heading } from \"@chakra-ui/react\";\nimport { Form, useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { FieldInput } from \"components/forms/FieldArrayInput\";\nimport PartyStrengthsInput from \"components/forms/PartyStrengthsInput\";\nimport MethodsInput from \"components/forms/MethodsInput\";\nimport { FaInfoCircle } from \"react-icons/fa\";\n\nAzurForm.propTypes = {\n  ParentStateUpdater: PropTypes.func,\n};\n\nexport default function AzurForm({ ParentStateUpdater }) {\n  const { values, errors, setFieldValue } = useFormikContext();\n\n  const MAX_FRACTIONS = 15;\n\n  return (\n    <Form>\n      {/* NUM SEATS */}\n      <Center flexDirection=\"column\">\n        <FieldInput\n          name=\"numSeats\"\n          type=\"number\"\n          errorMsg={errors?.numSeats}\n          fontSize=\"4xl\" /* \n          fontWeight=\"bold\" */\n          textAlign=\"center\"\n          color=\"black\"\n          width=\"6ex\" /* have to limit for now as otherwise the html-size prop makes this field very wide */\n          p=\"1\"\n          py=\"0\"\n          height=\"auto\"\n        />\n        <Tooltip label=\"z.B. Zahl der Sitze, Redeminuten oder Räume, die Sie verteilen möchten\">\n          <HStack alignItems=\"center\" spacing=\"1ex\">\n            <Text fontSize=\"xl\">Einheiten</Text>\n            <FaInfoCircle fontSize=\"1.2rem\" />\n          </HStack>\n        </Tooltip>\n      </Center>\n      <Heading as=\"h3\" size=\"xl\">\n        Fraktionsstärken\n      </Heading>\n      <PartyStrengthsInput\n        values={values}\n        errors={errors}\n        setFieldValue={setFieldValue}\n        MAX_FRACTIONS={MAX_FRACTIONS}\n        attributeKey=\"partyStrengths\"\n      />\n      <MethodsInput\n        values={values}\n        setFieldValue={setFieldValue}\n        attributeKey=\"method\"\n      />\n      <ParentStateUpdater />\n    </Form>\n  );\n}\n","import { Flex, Heading } from \"@chakra-ui/react\";\nimport Card from \"theme/Card\";\nimport ParentStateUpdater from \"components/forms/ParentStateUpdater\";\nimport { Formik, useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport bundestagMandatsverteilung from \"utils/bundestagMandate.json\";\nimport {\n  methodSchema,\n  numSeatsSchema,\n  partyStrengthsSchema,\n} from \"utils/inputValidationSchemes\";\nimport * as Yup from \"yup\";\nimport AzurForm from \"./AzurForm\";\n\nAzurInputs.propTypes = {\n  azurInput: PropTypes.object,\n  setAzurInput: PropTypes.func,\n};\n\nfunction AzurInputs({ azurInput, setAzurInput, ...cssprops }) {\n  // Initial Values\n  const initialValues = {\n    numSeats: 60,\n    method: \"schepers\",\n    partyStrengths: bundestagMandatsverteilung[0].data,\n  };\n\n  const schema = Yup.object().shape({\n    numSeats: numSeatsSchema,\n    partyStrengths: partyStrengthsSchema,\n    method: methodSchema,\n  });\n\n  // Validate is manually triggered in useEffect\n  return (\n    <Card {...cssprops}>\n      <Flex>\n        <Heading size=\"2xl\">Filter</Heading>\n      </Flex>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={schema}\n        validateOnChange={false}\n        validateOnBlur={false}\n      >\n        <AzurForm\n          ParentStateUpdater={() => {\n            const { values, validateForm } = useFormikContext();\n            return (\n              <ParentStateUpdater\n                values={values}\n                validateForm={validateForm}\n                inputData={azurInput}\n                setInputData={setAzurInput}\n              />\n            );\n          }}\n        />\n      </Formik>\n    </Card>\n  );\n}\n\nexport default AzurInputs;\n","import * as d3 from \"d3\";\nimport constants from '../utils/constants.json'\n\n\nexport function getPartyColor(partyName, index, partyArrayLength){\n    const colorScale = d3.scaleLinear().domain([1, partyArrayLength]).range([\"#333\", \"#EEE\"])\n    const partyColors = constants.partyColors\n    if(partyName in constants.partyAltNamesMapping){\n        partyName = constants.partyAltNamesMapping[partyName]\n    }\n\n    if(partyName in partyColors){\n        return partyColors[partyName]\n    }else{\n      return colorScale(index)\n    }\n}","import React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport PropTypes from \"prop-types\";\nimport { Box } from \"@chakra-ui/layout\";\nimport { getPartyColor } from \"../utils/getPartyColor\";\n\nPieChart.propTypes = {\n  data: PropTypes.object,\n  outerRadius: PropTypes.number,\n  innerRadius: PropTypes.number,\n};\n\nfunction PieChart({ data, outerRadius, innerRadius }) {\n  const width = 2 * outerRadius;\n  const height = 2 * outerRadius;\n\n  useEffect(() => {\n    drawChart();\n  }, [data]);\n\n  function drawChart() {\n    const parsedData = Object.entries(data).map(([key, value]) => {\n      return {\n        label: key,\n        value: value,\n      };\n    });\n\n    // Remove the old svg\n    // TODO: Do not selecet by ID to make this component reusable (or go for a more complex id)\n    d3.select(\"#pie-container\").select(\"svg\").remove(); // Create new svg\n    const svg = d3\n      .select(\"#pie-container\")\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n\n    const arcGenerator = d3\n      .arc()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius);\n    const pieGenerator = d3\n      .pie()\n      .padAngle(0)\n      .value((d) => d.value);\n\n    const arc = svg.selectAll().data(pieGenerator(parsedData)).enter();\n\n    // Append sectors\n    arc\n      .append(\"path\")\n      .attr(\"d\", arcGenerator)\n      .style(\"fill\", (arc, i) => {\n        let partyName = arc.data.label;\n        return getPartyColor(partyName, i, parsedData.length);\n      })\n      .append(\"svg:title\")\n      .text((arc) => {\n        return `${arc.data.label}\\n${arc.data.value}`;\n      })\n      .style(\"stroke\", \"#ffffff\")\n      .style(\"stroke-width\", 0); // Append text labels\n\n    /* arc\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"alignment-baseline\", \"middle\")\n      .text((d) => d.data.label)\n      .style(\"fill\", \"#ffffff\")\n      .attr(\"transform\", (d) => {\n        const [x, y] = arcGenerator.centroid(d);\n        return `translate(${x}, ${y})`;\n      }); */\n  }\n\n  return <Box id=\"pie-container\" display=\"inline-block\" width=\"auto\" m={1} />;\n}\n\nexport default PieChart;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport PieChart from \"components/PieChart\";\nimport {\n  Alert,\n  AlertIcon,\n  AlertTitle,\n  AlertDescription,\n  Flex,\n  Center,\n  Table,\n  Thead,\n  Tbody,\n  Tr,\n  Th,\n  Td,\n} from \"@chakra-ui/react\";\n\nimport { useTheme } from \"@chakra-ui/react\";\n\nDistributionOutput.propTypes = {\n  seatSplit: PropTypes.object,\n  isAmbiguous: PropTypes.bool,\n  azurInput: PropTypes.object,\n};\n\nexport default function DistributionOutput({\n  isAmbiguous,\n  seatSplit,\n  azurInput,\n}) {\n  const sizes = useTheme().sizes;\n  const innerWidthPx = convertRemToPixels(sizes[20]);\n  const outerWidthPx = convertRemToPixels(sizes[56]);\n\n  // sort output by the input order of parties\n  const partyNamesSorted = azurInput?.partyStrengths.map((entry) => entry.name);\n  const seatSplitSorted = {};\n\n  partyNamesSorted.forEach((partyName) => {\n    seatSplitSorted[partyName] = seatSplit[partyName];\n  });\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Center my=\"10\">\n        <Table size=\"md\">\n          <Thead>\n            <Tr>\n              {Object.keys(seatSplitSorted).map((fractionName) => (\n                <Th key={fractionName}>{fractionName} </Th>\n              ))}\n            </Tr>\n          </Thead>\n          <Tbody>\n            <Tr>\n              {Object.entries(seatSplitSorted).map(\n                ([fractionName, fractionStrength]) => (\n                  <Td key={fractionName}>\n                    {Array.isArray(fractionStrength)\n                      ? fractionStrength.join(\" oder \")\n                      : fractionStrength}\n                  </Td>\n                )\n              )}\n            </Tr>\n          </Tbody>\n        </Table>\n      </Center>\n      <Center>\n        {isAmbiguous ? (\n          <Alert status=\"warning\">\n            <AlertIcon />\n            <AlertTitle mr={2}>Mehrdeutiges Ergebnis</AlertTitle>\n            <AlertDescription>\n              Es lässt sich kein eindeutiges Ergebnis für diese Eingabe\n              berechnen. Das heißt, dass die Einheiten nicht eindeutig\n              bestimmten Fraktionen zugewiesen werden können. Es kann helfen\n              eine andere mathematische Methode zu wählen, oder diese\n              Verteilungsgröße zu vermeiden.\n            </AlertDescription>\n          </Alert>\n        ) : (\n          <PieChart\n            data={seatSplitSorted}\n            outerRadius={outerWidthPx}\n            innerRadius={innerWidthPx}\n          />\n        )}\n      </Center>\n    </Flex>\n  );\n}\n\nfunction convertRemToPixels(rem) {\n  return (\n    parseFloat(rem) *\n    parseFloat(getComputedStyle(document.documentElement).fontSize)\n  );\n}\n","import { Icon } from \"@chakra-ui/icons\";\nimport { Circle, Flex, Text, Box } from \"@chakra-ui/react\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { getPartyColor } from \"utils/getPartyColor\";\nimport _ from \"lodash\";\n\nexport const PositionCell = ({ cell }) => {\n  return (\n    <Flex justifyContent=\"center\">\n      <Circle size=\"3ex\" bg=\"brand.backgroundGrey\" color=\"black\">\n        <Text fontWeight=\"bold\">{cell.value}</Text>\n      </Circle>\n    </Flex>\n  );\n};\n\nPositionCell.propTypes = {\n  cell: PropTypes.object,\n};\n\nexport function AssignmentCell({ cell, tableData }) {\n  const value = cell?.value;\n  if (Array.isArray(value)) {\n    return \"Mehrdeutig! \" + parseSeatCountOutput(value);\n  } else {\n    const partyNames = Object.keys(tableData[0].seats);\n    const totalPartyCount = partyNames.length;\n    const index = partyNames.findIndex((elem) => elem == value);\n    const partyColor = getPartyColor(value, index, totalPartyCount);\n\n    const CircleIcon = (props) => (\n      <Icon viewBox=\"0 0 200 200\" {...props}>\n        <path\n          fill=\"currentColor\"\n          d=\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\"\n        />\n      </Icon>\n    );\n\n    return (\n      <Flex align=\"center\">\n        <Text flex={1} textAlign=\"center\">\n          {value}\n        </Text>\n        <CircleIcon color={partyColor} mr={2} boxSize={12} />\n      </Flex>\n    );\n  }\n}\nAssignmentCell.propTypes = {\n  cell: PropTypes.object,\n  tableData: PropTypes.array,\n};\n\nexport const SeatCountCell = ({ cell }) => {\n  return <SeatCountCellBase cell={cell} />;\n};\n\nSeatCountCell.propTypes = {\n  cell: PropTypes.object,\n};\n\nconst SeatCountCellBase = ({ cell }) => {\n  if (cell?.value == null) {\n    return \"loading...\";\n  }\n  const value = cell.value;\n\n  if (Array.isArray(value)) {\n    return (\n      <Box layerStyle=\"ambiguityContainerHighlight\">\n        <Text color=\"brand.orange\">Mehrdeutig!</Text>\n        <Text>{parseSeatCountOutput(value)}</Text>\n      </Box>\n    );\n  } else {\n    if (\n      _.has(cell, \"row.original.seat_goes_to\") &&\n      _.has(cell, \"column.Header\")\n    ) {\n      if (cell.row.original.seat_goes_to == cell.column.Header) {\n        return <Box fontWeight=\"bold\">{value}</Box>;\n      }\n    }\n\n    return value;\n  }\n};\n\nSeatCountCellBase.propTypes = {\n  cell: PropTypes.object,\n};\n\nexport const parseSeatCountOutput = (value) => {\n  if (Array.isArray(value)) {\n    return value.join(\" oder \");\n  }\n  return value;\n};\n\nexport const ComparisonCell = ({ cell, row }) => {\n  const partyName = cell?.column?.partyName;\n  if (row.original.is_identical) {\n    return <SeatCountCellBase cell={cell} />;\n  } else {\n    let valueA = row.original.dist_A.seats?.[partyName] || 0;\n    let valueB = row.original.dist_B.seats?.[partyName] || 0;\n\n    if (valueA != valueB) {\n      return `${parseSeatCountOutput(valueA)} \\u2192 ${parseSeatCountOutput(\n        valueB\n      )}`;\n    } else {\n      return valueA;\n    }\n  }\n};\n\nComparisonCell.propTypes = {\n  cell: PropTypes.object,\n  row: PropTypes.object,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Flex, Input } from \"@chakra-ui/react\";\n\nNumberRangeColumnFilter.propTypes = {\n  column: PropTypes.object,\n};\n\nexport default function NumberRangeColumnFilter({ column }) {\n  const { filterValue = [], preFilteredRows, setFilter } = column;\n  const [min, max] = React.useMemo(\n    () => [1, preFilteredRows.length],\n    [preFilteredRows]\n  );\n\n  return (\n    <Flex align=\"center\">\n      <Input\n        value={filterValue[0] || \"\"}\n        type=\"number\"\n        onChange={(e) => {\n          const val = e.target.value;\n          setFilter((old = []) => [\n            val ? parseInt(val, 10) : undefined,\n            old[1],\n          ]);\n        }}\n        placeholder={`${min}`}\n        width=\"8ex\"\n        mr=\"1ex\"\n      />\n      bis\n      <Input\n        value={filterValue[1] || \"\"}\n        type=\"number\"\n        onChange={(e) => {\n          const val = e.target.value;\n          setFilter((old = []) => [\n            old[0],\n            val ? parseInt(val, 10) : undefined,\n          ]);\n        }}\n        placeholder={`${max}`}\n        width=\"8ex\"\n        ml=\"1ex\"\n      />\n    </Flex>\n  );\n}\n","import {\n  Flex,\n  NumberInput,\n  NumberInputField,\n  NumberInputStepper,\n  NumberIncrementStepper,\n  NumberDecrementStepper,\n  Select,\n  Text,\n} from \"@chakra-ui/react\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport const PageSelect = ({\n  pageOptions,\n  gotoPage,\n  state: { pageIndex },\n  ...cssprops\n}) => {\n  return (\n    <Flex alignItems=\"center\" {...cssprops}>\n      <Text ml={2} flexShrink=\"0\">\n        Seite\n      </Text>\n      <NumberInput\n        w=\"10.5ex\"\n        p={0}\n        mx={2}\n        min={1}\n        max={pageOptions.length}\n        onChange={(value) => {\n          const page = value ? value - 1 : 0;\n          gotoPage(page);\n        }}\n        defaultValue={pageIndex + 1}\n      >\n        <NumberInputField />\n        <NumberInputStepper>\n          <NumberIncrementStepper />\n          <NumberDecrementStepper />\n        </NumberInputStepper>\n      </NumberInput>\n      <Text mr={2}>von {pageOptions.length}</Text>\n    </Flex>\n  );\n};\n\nPageSelect.propTypes = {\n  pageOptions: PropTypes.array,\n  gotoPage: PropTypes.func,\n  state: PropTypes.object,\n};\n\nexport const SelectPageLength = ({ pageSize, setPageSize }) => {\n  return (\n    <Flex>\n      <Select\n        w={40}\n        mr={2}\n        value={pageSize}\n        onChange={(e) => {\n          setPageSize(Number(e.target.value));\n        }}\n      >\n        {[8, 10, 20, 50, 100].map((pageSize) => (\n          <option key={pageSize} value={pageSize}>\n            {pageSize} pro Seite\n          </option>\n        ))}\n      </Select>\n    </Flex>\n  );\n};\n\nSelectPageLength.propTypes = {\n  pageSize: PropTypes.number,\n  setPageSize: PropTypes.func,\n};\n","import { Box, Table, Tbody, Td, Th, Thead, Tr } from \"@chakra-ui/react\";\nimport React from \"react\";\n\nimport PropTypes from \"prop-types\";\n\nconst RawTable = ({\n  getTableProps,\n  getTableBodyProps,\n  headerGroups,\n  prepareRow,\n  page,\n  getRowProps = () => ({}),\n}) => {\n  return (\n    <Box maxWidth=\"100%\">\n      <Table {...getTableProps()} variant=\"stickyHeader\">\n        <Thead>\n          {headerGroups.map((headerGroup, index) => (\n            <Tr\n              key={`headerGroup:${index}`}\n              {...headerGroup.getHeaderGroupProps()}\n            >\n              {headerGroup.headers.map((column) => (\n                <Th key={column.header} {...column.getHeaderProps()}>\n                  {column.render(\"Header\")}\n                </Th>\n              ))}\n            </Tr>\n          ))}\n        </Thead>\n        <Tbody {...getTableBodyProps()}>\n          {page.map((row) => {\n            prepareRow(row);\n            return (\n              <Tr key={row?.id} {...row.getRowProps(getRowProps(row))}>\n                {row.cells.map((cell) => (\n                  <Td {...cell.getCellProps()} key={cell?.column?.id + row?.id}>\n                    {cell.render(\"Cell\")}\n                  </Td>\n                ))}\n              </Tr>\n            );\n          })}\n        </Tbody>\n      </Table>\n    </Box>\n  );\n};\n\nRawTable.propTypes = {\n  getTableProps: PropTypes.func,\n  getTableBodyProps: PropTypes.func,\n  headerGroups: PropTypes.array,\n  prepareRow: PropTypes.func,\n  page: PropTypes.array,\n  getRowProps: PropTypes.func,\n};\n\nexport default RawTable;\n","import { HStack, Spinner, VStack } from \"@chakra-ui/react\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useFilters, usePagination, useTable } from \"react-table\";\nimport { PositionCell } from \"./CellRenders\";\nimport NumberRangeFilter from \"./NumberRangeFilter\";\nimport { PageSelect, SelectPageLength } from \"./Pagination\";\nimport RawTable from \"./RawTable\";\n\nDataTable.propTypes = {\n  data: PropTypes.array,\n  columns: PropTypes.array,\n  getRowProps: PropTypes.func,\n};\n\nconst DEFAULT_PAGE_SIZE = 20;\n\nexport default function DataTable({ data, columns, getRowProps = () => ({}) }) {\n  const defaultColumn = React.useMemo(\n    () => ({\n      disableFilters: true,\n    }),\n    []\n  );\n\n  const startHeaders = [\n    {\n      Header: \"\",\n      id: \"index\",\n      accessor: (_row, i) => i + 1,\n      Cell: PositionCell,\n      disableFilters: false,\n      defaultCanFilter: true,\n      Filter: NumberRangeFilter,\n      filter: \"between\",\n    },\n  ];\n\n  const dataMemo = React.useMemo(() => {\n    if (data == null) {\n      return [];\n    }\n    return data;\n  }, [data]);\n\n  const colsMemo = React.useMemo(() => {\n    if (columns == null) {\n      return [];\n    }\n    return startHeaders.concat(columns);\n  }, [columns]);\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    prepareRow,\n    page, //  page only has the rows for the active page (used instead of 'rows')\n    pageOptions,\n    gotoPage,\n    setPageSize,\n    state: { pageIndex, pageSize },\n  } = useTable(\n    { columns: colsMemo, data: dataMemo, defaultColumn },\n    useFilters,\n    usePagination\n  );\n\n  React.useEffect(() => {\n    // sets the default page size for the table\n    setPageSize(DEFAULT_PAGE_SIZE);\n  }, []);\n  return (\n    <>\n      {columns == undefined || data == undefined ? (\n        <Spinner />\n      ) : (\n        <VStack maxWidth=\"100%\">\n          {/*<HStack> // filter rows with this filter\n            <Text mr=\"2ex\">Anzeigen von</Text>\n            <IndexFilter headerGroups={headerGroups} />\n          </HStack> */}\n          <HStack maxWidth=\"100%\">\n            <RawTable\n              getTableProps={getTableProps}\n              getTableBodyProps={getTableBodyProps}\n              headerGroups={headerGroups}\n              prepareRow={prepareRow}\n              page={page}\n              getRowProps={getRowProps}\n            />\n          </HStack>\n\n          <HStack alignItems=\"center\" spacing=\"3ex\">\n            <PageSelect\n              pageOptions={pageOptions}\n              gotoPage={gotoPage}\n              state={{ pageIndex, pageSize }}\n            />\n            <SelectPageLength pageSize={pageSize} setPageSize={setPageSize} />\n          </HStack>\n        </VStack>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { AssignmentCell } from \"components/tables/CellRenders\";\n\nimport DataTable from \"components/tables/DataTable\";\n\nAssignmentSeq.propTypes = {\n  assignmentSequence: PropTypes.array,\n  tableData: PropTypes.array,\n};\n\nexport default function AssignmentSeq({ assignmentSequence, tableData }) {\n  const columns = [\n    {\n      Header: \"Zugriff\",\n      accessor: \"seat_goes_to\", // accessor is the \"key\" in the data\n      disableFilters: true,\n      Cell: ({ cell }) => AssignmentCell({ cell, tableData }),\n    },\n  ];\n\n  return <DataTable data={assignmentSequence} columns={columns} />;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DataTable from \"components/tables/DataTable\";\nimport _ from \"lodash\";\n\nimport { SeatCountCell } from \"components/tables/CellRenders\";\nTableOutput.propTypes = {\n  tableData: PropTypes.array,\n  assignmentSequence: PropTypes.array,\n  azurInput: PropTypes.object,\n};\n\nexport default function TableOutput({\n  tableData,\n  assignmentSequence,\n  azurInput,\n}) {\n  let columns = [];\n  let data = [];\n\n  if (tableData != null && Array.isArray(tableData) && tableData.length >= 1) {\n    // set up columns\n\n    // pull partyNames from input so output has same order as input\n    const partyNames = azurInput?.partyStrengths.map((entry) => entry.name);\n    columns = partyNames.map((partyName) => {\n      return {\n        Header: partyName,\n        accessor: \"seats.\" + partyName, // we want to access the seats subitem\n        isNumeric: true,\n        Cell: SeatCountCell,\n      };\n    });\n\n    if (_.isEmpty(assignmentSequence)) {\n      data = tableData;\n    } else {\n      data = tableData.map((tableRow, i) => {\n        return {\n          seat_goes_to: assignmentSequence[i].seat_goes_to,\n          ...tableRow,\n        };\n      });\n    }\n  }\n  return (\n    <DataTable\n      data={data}\n      columns={columns}\n      getRowProps={(row) => {\n        return {\n          layerStyle: row?.original?.is_ambiguous ? \"ambigousRowHighlight\" : \"\",\n        };\n      }}\n    />\n  );\n}\n","import {\n  Center,\n  Table,\n  Tbody,\n  Td,\n  Th,\n  Thead,\n  Tr,\n  Text,\n  Box,\n} from \"@chakra-ui/react\";\nimport React from \"react\";\n\nimport PropTypes from \"prop-types\";\n\nimport { parseSeatCountOutput } from \"components/tables/CellRenders\";\n\n// TODO PRINT ONLY MAX 500 ROWS\nconst PrintTable = ({ tableData }) => {\n  let tableOutput = null;\n  // only take first 400 rows for printing\n  if (tableData != null) {\n    tableOutput = tableData.slice(0, 400);\n  }\n\n  return tableOutput != null ? (\n    <Center flexDirection=\"column\" maxWidth=\"100%\">\n      <Table>\n        <Thead>\n          <Tr>\n            <Th>Position</Th>\n            {Object.keys(tableOutput[0].seats).map((partyName) => (\n              <Th key={partyName}>{partyName}</Th>\n            ))}\n          </Tr>\n        </Thead>\n        <Tbody>\n          {tableOutput.map((row, rowIndex) => {\n            return (\n              <Tr key={`tablePrintRow${rowIndex}`}>\n                <Td>{rowIndex + 1}</Td>\n                {Object.values(row.seats).map((entry, colIndex) => {\n                  return (\n                    <Td key={`tablePrintRow${rowIndex}_${colIndex}`}>\n                      {Array.isArray(entry) ? (\n                        <Box layerStyle=\"ambiguityContainerHighlight\">\n                          <Text color=\"brand.orange\">Mehrdeutig!</Text>\n                          <Text>{parseSeatCountOutput(entry)}</Text>\n                        </Box>\n                      ) : (\n                        <Box>{entry}</Box>\n                      )}\n                    </Td>\n                  );\n                })}\n              </Tr>\n            );\n          })}\n        </Tbody>\n      </Table>\n      {tableData.length >= 400 && (\n        <Text>\n          Es kann nur eine begrenzte Anzahl an Zeilen gedruckt werden.\n        </Text>\n      )}\n    </Center>\n  ) : (\n    \"Loading\"\n  );\n};\n\nPrintTable.propTypes = {\n  tableData: PropTypes.array,\n};\n\nexport default PrintTable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Heading, Text, Table, Tr, Th, Td, Tbody } from \"@chakra-ui/react\";\n\nimport constants from \"utils/constants.json\";\nimport PrintTable from \"../Print/PrintTable\";\n\nconst PrintWrapper = React.forwardRef(function PrintRef(\n  { azurResponse, azurInput },\n  ref\n) {\n  const tableData = azurResponse?.table;\n\n  let methodUsed = \"\";\n  if (azurInput?.method != null) {\n    const methodTitle = constants.azurMethods.find(\n      (method) => method?.apiName == azurInput?.method\n    )?.title;\n    if (methodTitle != null) methodUsed = methodTitle;\n  }\n\n  return (\n    <Box p={3} ref={ref}>\n      <Heading size=\"xl\">Eingabe</Heading>\n      <Box>\n        <Heading size=\"lg\">Verteilmasse</Heading>\n        <Text>{azurInput?.numSeats}</Text>\n        <Heading size=\"lg\">Methode</Heading>\n        <Text>{methodUsed} </Text>\n        <Heading size=\"lg\">Fraktionsstärken</Heading>\n        {azurInput.partyStrengths != null && (\n          <Table>\n            <Tbody>\n              <Tr>\n                <Th>Name</Th>\n                {azurInput?.partyStrengths.map((row) => (\n                  <Td key={`Name_${row.name}`}>{row.name}</Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Th>Stärke</Th>\n                {azurInput?.partyStrengths.map((row) => (\n                  <Td key={`Stärke_${row.strength}`}>{row.strength}</Td>\n                ))}\n              </Tr>\n            </Tbody>\n          </Table>\n        )}\n      </Box>\n      <Heading size=\"xl\">Ausgabetabelle</Heading>\n      <Box>\n        <PrintTable tableData={tableData} />\n      </Box>\n    </Box>\n  );\n});\n\nPrintWrapper.propTypes = {\n  azurResponse: PropTypes.object,\n  azurInput: PropTypes.object,\n};\n\nexport default PrintWrapper;\n","import React, { useRef } from \"react\";\n\nimport { useReactToPrint } from \"react-to-print\";\nimport { HStack, Text, Button, Box } from \"@chakra-ui/react\";\nimport { FaPrint } from \"react-icons/fa\";\nimport PrintWrapper from \"../Print/PrintWrapper\";\n\nimport PropTypes from \"prop-types\";\n\nconst ExportIcons = ({ azurResponse, azurInput }) => {\n  const componentRef = useRef();\n  const handlePrint = useReactToPrint({\n    content: () => componentRef.current,\n  });\n\n  // TODO only render PrintWrapper to dom if we are printing (onClick)\n  return (\n    <HStack spacing=\"0\">\n      {/* // export button\n      <Button variant=\"outline\">\n        <HStack align=\"center\" spacing=\"0.3rem\">\n          <FaFileCsv />\n          <Text fontWeight=\"normal\" fontSize=\"sm\">\n            Exportieren\n          </Text>\n        </HStack>\n      </Button>\n      */}\n      <Button variant=\"outline\" onClick={handlePrint}>\n        <HStack spacing=\"0.3rem\">\n          <FaPrint />\n          <Text fontWeight=\"normal\" fontSize=\"sm\">\n            Drucken\n          </Text>\n        </HStack>\n      </Button>\n      <Box display=\"none\">\n        <PrintWrapper\n          azurResponse={azurResponse}\n          azurInput={azurInput}\n          ref={componentRef}\n        />\n      </Box>\n    </HStack>\n  );\n};\n\nExportIcons.propTypes = {\n  azurResponse: PropTypes.object,\n  azurInput: PropTypes.object,\n};\n\nexport default ExportIcons;\n","import React from \"react\";\nimport DistributionOutput from \"./DistributionOutput\";\nimport AssignmentSeq from \"./AssignmentSeq\";\nimport TableOutput from \"./TableOutput\";\nimport ExportIcons from \"./ExportIcons\";\n\nimport {\n  Tabs,\n  TabList,\n  TabPanels,\n  Tab,\n  TabPanel,\n  Spinner,\n  Center,\n  Flex,\n} from \"@chakra-ui/react\";\n\nimport PropTypes from \"prop-types\";\n\nOutputTabs.propTypes = {\n  azurInput: PropTypes.object,\n  azurResponse: PropTypes.object,\n  loading: PropTypes.bool,\n};\n\nexport default function OutputTabs({ azurInput, azurResponse, loading }) {\n  React.useEffect(() => {\n    if (azurInput.method === \"hare\") {\n      // if we are on assignmentSequence we should switch tabs as it does not exist for Hare\n      if (tabIndex === 1) {\n        setTabIndex(0);\n      }\n    }\n  }, [azurInput]);\n\n  const [tabIndex, setTabIndex] = React.useState(0);\n\n  const handleTabsChange = (index) => {\n    setTabIndex(index);\n  };\n\n  const selectedStyle = {\n    color: \"brand.darkBlue\",\n    boderColor: \"brand.darkBlue\",\n    border: \"1px solid\",\n    borderBottom: \"none\",\n    boxShadow: \"0px 2px 0px -1px white\",\n  };\n  return (\n    <Tabs mt=\"10\" align=\"left\" index={tabIndex} onChange={handleTabsChange}>\n      <Flex justifyContent=\"space-between\" alignItems=\"end\">\n        <TabList>\n          <Tab fontSize=\"lg\" _selected={selectedStyle}>\n            Anteile\n          </Tab>\n          <Tab\n            fontSize=\"lg\"\n            _selected={selectedStyle}\n            title={\n              azurInput.method === \"hare\"\n                ? `Bei der mathematischen Berechnungsmethode Hare/Niemeyer entsteht keine Zugriffsreihenfolge. Probieren Sie eine andere Methode.`\n                : `Reihenfolge in der die einzelnen Einheiten an die Fraktionen vergeben werden.`\n            }\n            isDisabled={azurInput.method === \"hare\"}\n          >\n            Reihenfolge\n          </Tab>\n          <Tab\n            fontSize=\"lg\"\n            _selected={selectedStyle}\n            title={`Tabellarische Übersicht für die Verteilmassen von 1 bis ${azurInput.numSeats}`}\n          >\n            Tabelle\n          </Tab>\n        </TabList>\n        <ExportIcons azurResponse={azurResponse} azurInput={azurInput} />\n      </Flex>\n\n      {loading ? (\n        <Center minHeight=\"40em\">\n          <Spinner size=\"xl\" color=\"brand.orange\" />\n        </Center>\n      ) : (\n        <TabPanels>\n          <TabPanel>\n            <DistributionOutput\n              isAmbiguous={azurResponse.distribution.is_ambiguous}\n              seatSplit={azurResponse.distribution.seats}\n              azurInput={azurInput}\n            />\n          </TabPanel>\n          <TabPanel>\n            <AssignmentSeq\n              tableData={azurResponse.table}\n              assignmentSequence={azurResponse.assignment_sequence}\n            />\n          </TabPanel>\n          <TabPanel>\n            <TableOutput\n              tableData={azurResponse.table}\n              assignmentSequence={azurResponse.assignment_sequence}\n              azurInput={azurInput}\n            />\n          </TabPanel>\n        </TabPanels>\n      )}\n    </Tabs>\n  );\n}\n","import {\n  Alert,\n  AlertDescription,\n  AlertIcon,\n  AlertTitle,\n  Flex,\n  Heading,\n  Text,\n} from \"@chakra-ui/react\";\nimport _ from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport OutputTabs from \"./OutputTabs\";\nimport Card from \"theme/Card\";\n\nOutput.propTypes = {\n  azurInput: PropTypes.object,\n  azurResponse: PropTypes.object,\n  azurError: PropTypes.object,\n  loading: PropTypes.bool,\n};\n\nexport default function Output({\n  azurInput,\n  azurResponse,\n  azurError,\n  loading,\n  ...cssprops\n}) {\n  return (\n    <Card {...cssprops} variant=\"organismWrapper\">\n      <Heading size=\"2xl\">Verteilung</Heading>\n      <Flex flexDirection=\"column\">\n        {!_.isEmpty(azurInput.errors) ? (\n          <Alert status=\"error\">\n            <AlertIcon />\n            <AlertTitle mr={2}>Ungültige Eingabe!</AlertTitle>\n            <AlertDescription>\n              {azurInput.errors.numSeats != null && (\n                <>\n                  <Text mt={3} fontWeight=\"bold\">\n                    Fehler bei der Eingabe der Einheiten\n                  </Text>\n                  <Text>{azurInput.errors.numSeats}</Text>\n                </>\n              )}\n              {azurInput.errors.partyStrengths != null && (\n                <>\n                  <Text mt={3} fontWeight=\"bold\">\n                    Fehler bei der Eingabe der Fraktionsstärken\n                  </Text>\n                  {typeof azurInput.errors.partyStrengths === \"string\" ? ( // Errors that are on FieldArray Level\n                    <Text>{azurInput.errors.partyStrengths}</Text>\n                  ) : (\n                    azurInput.errors.partyStrengths.map((errorEntry, index) => {\n                      return errorEntry.strength ? (\n                        <Text key={index + \"strengthError\"}>\n                          {errorEntry.strength}\n                        </Text>\n                      ) : (\n                        <Text key={index + \"nameError\"}>{errorEntry.name}</Text>\n                      );\n                    })\n                  )}\n                </>\n              )}\n            </AlertDescription>\n          </Alert>\n        ) : azurError != null ? (\n          <Alert status=\"error\">\n            <AlertIcon />\n            <AlertTitle mr={2}>Fehler bei der Berechnung</AlertTitle>\n            <AlertDescription>\n              Es ist ein Fehler bei der Berechnung aufgetreten:{\" \"}\n              {azurError.message}\n            </AlertDescription>\n          </Alert>\n        ) : (\n          // everything went fine and we have results\n          <OutputTabs\n            azurResponse={azurResponse}\n            azurInput={azurInput.data}\n            loading={loading}\n          />\n        )}\n      </Flex>\n    </Card>\n  );\n}\n","import { Flex } from \"@chakra-ui/react\";\nimport React from \"react\";\nimport useAzur from \"./hooks/useAzur\";\nimport AzurInputs from \"./Input/Input\";\nimport Output from \"./Output/Output\";\n\nexport default function AzurDefault() {\n  const [azurInput, setAzurInput] = React.useState({ data: {}, errors: {} });\n  // TODO move hook to output child?\n  const { data, loading, error } = useAzur(azurInput);\n\n  return (\n    <Flex\n      flexDirection={[\"column\", \"column\", \"column\", \"row\"]}\n      height={[\"auto\", \"auto\", \"auto\", \"100%\"]}\n      width={[\"auto\", \"auto\", \"auto\", \"90vw\"]}\n      margin={[\"0\", \"0\", \"0\", \"0 auto\"]}\n    >\n      <AzurInputs\n        azurInput={azurInput}\n        setAzurInput={setAzurInput}\n        maxHeight=\"100%\"\n        width={[\"100%\", \"100%\", \"100%\", \"35%\"]} // Todo proper width layout\n      />\n      <Output\n        azurInput={azurInput}\n        azurResponse={data}\n        azurError={error}\n        loading={loading}\n        maxHeight=\"100%\"\n        width={[\"100%\", \"100%\", \"100%\", \"65%\"]}\n      />\n    </Flex>\n  );\n}\n","import React from \"react\";\nimport _ from \"lodash\";\n\nexport default function useAzur(azurInput) {\n  const [data, setData] = React.useState({});\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(null);\n\n  //*** FETCHING AZUR OUTPUTS\n  const fetchAzur = async (azurInputUpdate) => {\n    setLoading(true);\n    // Parse Form Input into a form digestable for the API\n    const partyStrengthForApi = {};\n    azurInputUpdate.partyStrengths.forEach((entry) => {\n      partyStrengthForApi[entry.name] = entry.strength;\n    });\n\n    // useEffect itself should not be async according to linter, so we work with an anonymous function\n    fetch(\"https://azur-api.herokuapp.com/azur\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        votes: partyStrengthForApi,\n        method: azurInputUpdate.method,\n        num_of_seats: azurInputUpdate.num_of_seats,\n        return_table: true,\n      }),\n    })\n      .then(async (resp) => {\n        if (resp.ok) return resp.json();\n        else {\n          // error handling\n          const error = await resp.json();\n          let errorMessage = error?.message;\n          if (errorMessage == null) {\n            errorMessage = \"An unexpected error occured\";\n          }\n          throw new Error(errorMessage);\n        }\n      })\n      .then((azurResponse) => { // TODO should not set states if requests props are no longer valid/ have been overwritten\n        setError(null);\n        setData(azurResponse);\n      })\n      .catch((fetchingError) => {\n        setData(null);\n        console.log(fetchingError);\n        setError(fetchingError);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  React.useEffect(() => {\n    if (_.isEmpty(azurInput?.errors)) {\n      if (\"partyStrengths\" in azurInput?.data) {\n        fetchAzur(azurInput.data);\n      }\n    }\n  }, [azurInput]);\n\n  return { data, loading, error };\n}\n","import React from \"react\";\nimport AzurDefault from \"views/AzurDefault/AzurDefault\";\nimport AzurCompare from \"views/AzurCompare/AzurCompare\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { Box } from \"@chakra-ui/react\";\nimport {\n  Link,\n  Button,\n  useDisclosure,\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalFooter,\n  ModalBody,\n  ModalCloseButton,\n} from \"@chakra-ui/react\";\n\nfunction App() {\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  React.useEffect(() => {\n    onOpen();\n  }, []);\n\n  return (\n    <Box className=\"App\">\n      <Modal isOpen={isOpen} onClose={onClose}>\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Diese Seite ist ein Prototyp.</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody>\n            Diese Seite ist ein Prototyp des Tech4Germany Fellowship Jahrgangs\n            2021. Die Seite wird nicht mehr aktiv gepflegt, und für die\n            Richtigkeit der Informationen übernehmen wir keine Gewähr.\n          </ModalBody>\n\n          <ModalFooter>\n            <Button mr={3} variant=\"ghost\">\n              <Link href=\"https://tech.4germany.org/project/anteilsberechner-bundestag/\">\n                Mehr Informationen\n              </Link>\n            </Button>\n            <Button colorScheme=\"blue\" onClick={onClose}>\n              Verstanden\n            </Button>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n\n      <Box height=\"100vh\">\n        <AzurDefault />\n      </Box>\n      {/* <BrowserRouter>  */}\n      {/* NAV */}\n      {/*\n      <Flex justifyContent=\"end\" mx=\"10\" height=\"5vh\">\n          <Link to=\"/\">\n            <Button>Azur Default</Button>\n          </Link>\n          <Link to=\"/compare\">\n            <Button>Azur Compare</Button>\n          </Link>\n        </Flex> */}\n\n      {/* APP */}\n      {/*       <Box height=\"100vh\">\n        <Switch>\n            <Route exact={true} path=\"/\">\n        <AzurDefault />\n        </Route>\n            <Route exact={true} path=\"/compare\">\n              <AzurCompare />\n            </Route>\n          </Switch>\n      </Box>\n    </BrowserRouter> */}\n    </Box>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport { Global } from \"@emotion/react\";\n\nexport const fonts = {\n  heading: \"BundesSans\",\n  body: \"Open Sans\",\n};\n\nexport const fontSizes = {\n  xs: \"0.6rem\",\n  sm: \"0.8rem\",\n  md: \"1rem\", // 12px normal text\n  lg: \"1.1rem\",\n  xl: \"1.6rem\", // 20px heading 3\n  \"2xl\": \"2rem\", // 24px heading 2\n  \"3xl\": \"2.3rem\", // 28px heading 1\n  \"4xl\": \"3rem\", // custom very large\n  \"5xl\": \"4rem\", // custom very large\n};\n\nconst FontFaces = () => (\n  <Global\n    styles={`\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'normal';\n        font-style: 'italic';\n        src: url('fonts/BundesSansOffice-Italic.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'normal';\n        src: url('fonts/BundesSansOffice.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'bold';\n        font-style: 'italic';\n        src: url('fonts/BundesSansOffice-BoldItalic.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'bold';\n        src: url('fonts/BundesSansOffice-Bold.ttf');\n      }\n    `}\n  />\n);\n\nexport default FontFaces;\n","const Table = {\n  baseStyle: {\n    table: {\n      display: \"inline-block\",\n      maxWidth: \"100%\",\n      width: \"auto\",\n      overflowX: \"auto\",\n      borderCollapse: \"collapse\",\n    },\n    th: {\n      color: \"brand.primary\",\n      textAlign: \"center\",\n      textTransform: \"none\",\n    },\n    td: {\n      textAlign: \"center\",\n      fontWeight: \"normal\",\n    },\n  },\n  sizes: {\n    md: {\n      table: {\n        fontSize: \"md\",\n      },\n      td: {\n        fontSize: \"md\",\n      },\n      th: {\n        fontSize: \"md\",\n      },\n    },\n    lg: {\n      table: {\n        fontSize: \"lg\",\n      },\n      td: {\n        fontSize: \"lg\",\n      },\n      th: {\n        fontSize: \"lg\",\n      },\n    },\n  },\n  variants: {\n    stickyHeader: {\n      table: {\n        height: \"55vh\",\n        overflow: \"auto\",\n      },\n      thead: {\n        position: \"sticky\",\n        top: \"0\",\n        backgroundColor: \"white\",\n      },\n    },\n  },\n  defaultProps: { size: \"md\" },\n};\n\nexport default Table;\n","import { extendTheme } from \"@chakra-ui/react\";\nimport { fontSizes, fonts } from \"./fonts\";\nimport Table from \"./Table\";\n\nconst colors = {\n  brand: {\n    primary: \"#4A5568\",\n    orange: \"#FF7100\",\n    orangeAlpha: {\n      50: \"rgba(255, 133, 0, 0.02)\",\n      100: \"rgba(255, 133, 0, 0.04)\",\n      200: \"rgba(255, 133, 0, 0.08)\",\n      300: \"rgba(255, 133, 0, 0.16)\",\n      400: \"rgba(255, 133, 0, 0.24)\",\n      500: \"rgba(255, 133, 0, 0.36)\",\n      600: \"rgba(255, 133, 0, 0.48)\",\n      700: \"rgba(255, 133, 0, 0.64)\",\n      800: \"rgba(255, 133, 0, 0.80)\",\n    },\n    darkBlue: \"#3396B6\",\n    darkBlueAlpha: {\n      50: \"rgba(51, 150, 182, 0.02)\",\n      100: \"rgba(51, 150, 182, 0.04)\",\n      200: \"rgba(51, 150, 182, 0.08)\",\n      300: \"rgba(51, 150, 182, 0.16)\",\n      400: \"rgba(51, 150, 182, 0.24)\",\n      500: \"rgba(51, 150, 182, 0.36)\",\n      600: \"rgba(51, 150, 182, 0.48)\",\n      700: \"rgba(51, 150, 182, 0.64)\",\n      800: \"rgba(51, 150, 182, 0.80)\",\n    },\n    backgroundGrey: \"#EDF2F7\", // \"#F6F6FA\",\n  },\n};\n\nconst Button = {\n  baseStyle: {\n    margin: \"1\",\n    padding: \"1.5em\",\n    whiteSpace: \"normal\", // necessary to allow for line breaks\n    wordWrap: \"break-word\",\n    borderRadius: \"none\",\n    fontWeight: \"normal\",\n  },\n  variants: {\n    active: {\n      backgroundColor: \"brand.orangeAlpha.600\",\n      border: \"1px solid\",\n      borderColor: \"brand.orange\",\n      fontWeight: \"bold\",\n    },\n  },\n};\n\nconst Card = {\n  baseStyle: {\n    backgroundColor: \"brand.backgroundGrey\",\n    borderRadius: \"lg\",\n    m: 3,\n    p: \"10\",\n    py: \"2\",\n    overflowY: \"auto\",\n  },\n  variants: {\n    ghost: {\n      backgroundColor: \"transparent\",\n    },\n  },\n};\n\nconst Tabs = {\n  parts: [\"tabpanel\", \"tab\"],\n  baseStyle: {\n    tabpanel: {\n      bg: \"white\",\n      my: 0,\n      border: \"1px solid\",\n      borderColor: \"brand.darkBlue\",\n    },\n    tab: {\n      bg: \"white\",\n      p: 3,\n    },\n  },\n  variants: {},\n};\n\nconst Input = {\n  parts: [\"field\"],\n  baseStyle: {\n    field: {\n      margin: \"1\",\n      my: 0,\n      py: \"1\",\n      px: \"4\",\n      backgroundColor: \"white\",\n      outline: \"1px solid\",\n      outlineColor: \"brand.darkBlueAlpha.200\",\n      border: \"none\",\n    },\n  },\n  variants: {\n    fakeInput: {\n      field: {\n        pointerEvents: \"none\",\n      },\n    },\n  },\n  defaultProps: {\n    size: \"\",\n    variant: \"\",\n  },\n};\n\nconst Heading = {\n  baseStyle: {\n    color: \"brand.primary\",\n    fontWeight: \"regular\",\n  },\n  sizes: {\n    lg: {\n      fontSize: \"lg\",\n      mt: \"5\",\n      mb: \"3\",\n    },\n    xl: {\n      fontSize: \"xl\",\n      mt: \"7\",\n      mb: \"3\",\n      color: \"brand.darkBlue\",\n    },\n    \"2xl\": {\n      fontSize: \"2xl\",\n      mt: \"7\",\n      mb: \"3\",\n      color: \"brand.darkBlue\",\n    },\n  },\n};\n\nexport const bundestagTheme = extendTheme({\n  components: {\n    Button,\n    Input,\n    Heading,\n    Tabs,\n    Card,\n    Table,\n  },\n  colors,\n  fonts,\n  fontSizes,\n  layerStyles: {\n    errorGlow: {\n      outline: \"1px solid #E53E3E\",\n      boxShadow: \"0 0 10px #E53E3E\",\n    },\n    ambiguityContainerHighlight: {\n      /*       outline: \"1px solid #FF7100\",\n      boxShadow: \"0 0 10px #FF7100\", */\n    },\n    changedRowHighlight: {\n      /*       outline: \"1px solid #FF7100\",\n      boxShadow: \"0 0 10px #FF7100\", */\n      backgroundColor: \"brand.orangeAlpha.300\",\n    },\n    ambigousRowHighlight: {\n      backgroundColor: \"brand.orangeAlpha.300\",\n    },\n  },\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"App\";\nimport \"@fontsource/open-sans/400.css\";\nimport \"@fontsource/open-sans/700.css\";\nimport FontFaces from \"./theme/fonts\";\nimport { bundestagTheme } from \"./theme/themes.js\";\nimport { ChakraProvider } from \"@chakra-ui/react\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider resetCSS={true} theme={bundestagTheme}>\n      <FontFaces />\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}