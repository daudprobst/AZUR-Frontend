(this.webpackJsonpazur_frontend=this.webpackJsonpazur_frontend||[]).push([[0],{370:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(67),s=n.n(i),l=n(5),c=n(393),o=n(23),u=n.n(o),d=n(57),b=n(10),j=n.n(b);var h=n(8),g=n(24),f=n(396),m=n(59),p=n(388),x=n(2),O=["variant"];var v=function(e){var t=e.variant,n=Object(g.a)(e,O),r=Object(m.b)("Card",{variant:t});return Object(x.jsx)(p.a,Object(h.a)({__css:r},n))},y=n(26),S=["num_of_seats"],w=function(e){var t=e.inputData,n=e.setInputData,r=Object(y.e)(),i=r.values,s=r.validateForm,l=a.a.useCallback(j.a.debounce(function(){var e=Object(d.a)(u.a.mark((function e(t,n,r,a){var i,s,l,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(i=e.sent,!j.a.isEmpty(i)){e.next=11;break}if(s=null===r||void 0===r?void 0:r.data,l=s.num_of_seats,c=Object(g.a)(s,S),o=Object(h.a)(Object(h.a)({},c),{},{numSeats:l}),!j.a.isEqual(o,t)){e.next=8;break}return e.abrupt("return",null);case 8:a({errors:{},data:Object(h.a)(Object(h.a)({},t),{},{num_of_seats:t.numSeats})}),e.next=14;break;case 11:if(!j.a.isEqual(r.errors,i)){e.next=13;break}return e.abrupt("return",null);case 13:a({errors:i,data:{}});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),550),[]);return a.a.useEffect((function(){l(i,s,t,n)}),[i]),null},z=n(62),k=n(36),A=k.b().typeError("Dieses Feld darf lediglich Zahlen enthalten").integer("Dieses Feld darf lediglich ganze Zahlen enthalten").required("Dieses Feld muss ausgef\xfcllt sein").min(1,"Die Anzahl der Einheiten muss gr\xf6\xdfer als 1 sein.").max(1e5,"Berechnungen von mehr als 100 000 Einheiten wird nicht unterst\xfctzt"),E=k.a().of(k.c().shape({name:k.d().min(1,"Mindestens ein Buchstabe als Name ist notwendig").required("Dieses Feld muss ausgef\xfcllt sein"),strength:k.b().integer("Dieses Feld darf lediglich Zahlen enthalten").typeError("Dieses Feld darf lediglich ganze Zahlen enthalten").required("Dieses Feld muss ausgef\xfcllt sein").min(0,"Das St\xe4rkeverh\xe4ltnis muss gr\xf6\xdfer als 0 sein.").max(1e9,"Jeder Fraktion d\xfcrfen maximal 1 000 000 000 Stimmen zukommen")})).required("Es wird ein Input f\xfcr die Fraktionsst\xe4rken ben\xf6tigt").min(1,"Es wird mindestens eine Fraktion ben\xf6tigt.").test("test_for_duplicates","Es werden zwei Fraktionen mit dem selben Namen aufgef\xfchrt.",(function(e){var t=e.map((function(e){return e.name}));return new Set(t).size===t.length})),F=k.d().required("Dieses Feld wird ben\xf6tigt."),D=n(398),C=n(404),_=n(409),I=n(395),B=n(389),R=["fieldArrayName","index","fieldKey","fieldType","errors"],N=["name","errorMsg","type"];function P(e){var t=e.fieldArrayName,n=e.index,r=e.fieldKey,a=e.fieldType,i=e.errors,s=Object(g.a)(e,R);return Object(x.jsx)(M,Object(h.a)({name:"".concat(t,".").concat(n,".").concat(r),errorMsg:V(j.a.get(i,t),n,r)?j.a.get(i,t)[n][r]:null,type:a},s))}function M(e){var t=e.name,n=e.errorMsg,r=e.type,a=Object(g.a)(e,N);return Object(x.jsx)(y.a,Object(h.a)({as:B.a,name:t,layerStyle:null!=n?"errorGlow":"",title:null!=n?n:"",type:r},a))}var V=function(e,t,n){return!(null==e||!Array.isArray(e)||!Object.prototype.hasOwnProperty.call(e,t)||null==e[t][n])},H=n(397),G=n(175),T=n(408),U=function(e){var t=e.values,n=e.errors,r=e.fieldArrayName,a=e.MAX_FRACTIONS,i=j.a.get(t,r),s=j.a.get(n,r);return Object(x.jsx)(p.a,{children:Object(x.jsx)(y.b,{name:r,children:function(e){var t=e.remove,l=e.push;return Object(x.jsxs)(_.b,{layerStyle:null!=s&&"string"===typeof s?"errorGlow":"",title:null!=s&&"string"===typeof s?s:"Fraktionsst\xe4rken",children:[i.length>0&&i.map((function(e,a){return Object(x.jsxs)(c.a,{flexDirection:"row",children:[Object(x.jsx)(P,{fieldKey:"name",fieldArrayName:r,index:a,fieldType:"text",errors:n,flexGrow:"3",width:"0px",ml:0}),Object(x.jsx)(P,{fieldKey:"strength",fieldArrayName:r,index:a,width:"0px",flexGrow:"1",fieldType:"number",textAlign:"center",errors:n}),Object(x.jsx)(T.a,{variant:"ghost",isDisabled:i.length<=1,m:0,width:"3ex",title:i.length>1?"Fraktion entfernen":"Fraktion kann nicht entfernt werden, da es mindestens eine Fraktion geben muss.",onClick:function(){return t(a)},children:Object(x.jsx)(G.a,{})})]},a)})),Object(x.jsx)(T.a,{variant:"ghost",_hover:{backgroundColor:"brand.darkBlueAlpha.300"},px:0,m:0,width:"100%",isDisabled:i.length>=a,title:i.length<a?"Fraktion hinzuf\xfcgen":"Es k\xf6nnen keine weiteren Fraktion hinzugef\xfcgt werden. Dieser Rechner unterst\xfctzt maximal ".concat(a," Eintr\xe4ge f\xfcr Fraktionen."),onClick:function(){return l({name:"Fraktion XYZ",strength:0})},children:Object(x.jsxs)(c.a,{flexDirection:"row",m:0,width:"100%",children:[Object(x.jsx)(B.a,{ml:0,width:"0px",flexGrow:"3",disabled:!0,variant:"fakeInput"}),Object(x.jsx)(B.a,{width:"0px",flexGrow:"1",disabled:!0,variant:"fakeInput"}),Object(x.jsx)(T.a,{width:"3ex",as:"span",m:0,variant:"ghost",pointerEvents:"none",children:Object(x.jsx)(I.a,{color:"blackAlpha.400",children:"+"})})]})})]})}})})},W=["activeValue","presetData","attributeName","setFieldValue","children"];function q(e){var t=e.activeValue,n=e.presetData,r=e.attributeName,a=e.setFieldValue,i=e.children,s=Object(g.a)(e,W);return Object(x.jsx)(T.a,Object(h.a)(Object(h.a)({variant:"".concat(j.a.isEqual(t,n)?"active":"outline"),onClick:function(){a(r,n)}},s),{},{children:i}))}var K=function(e){var t=e.values,n=e.errors,r=e.setFieldValue,a=e.MAX_FRACTIONS,i=e.attributeKey;return Object(x.jsxs)(p.a,{children:[Object(x.jsx)(f.a,{as:"h4",size:"lg",children:"Voreinstellungen"}),Object(x.jsx)(Z,{values:t,setFieldValue:r,partyStrengthsKey:i}),Object(x.jsx)(f.a,{as:"h4",size:"lg",children:"Manuelle Eingabe"}),Object(x.jsx)(U,{fieldArrayName:i,values:t,errors:n,MAX_FRACTIONS:a})]})},Z=function(e){var t=e.values,n=e.setFieldValue,r=e.partyStrengthsKey;return Object(x.jsx)(H.a,{columnGap:3,rowGap:3,templateColumns:"repeat(auto-fit, minmax(15ex, 1fr))",children:z.map((function(e){return Object(x.jsx)(H.b,{children:Object(x.jsx)(q,{activeValue:j.a.get(t,r,[]),presetData:e.data,attributeName:r,setFieldValue:n,width:"100%",m:0,title:null!=(null===e||void 0===e?void 0:e.label)?e.label:"Voreinstellung f\xfcr Fraktionsst\xe4rken - Klicken um zu aktivieren",children:e.title})},e.key)}))})},J=n(58),X=function(e){var t=e.values,n=e.attributeKey,r=e.setFieldValue;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.a,{as:"h3",size:"xl",children:"Mathematische Verfahren"}),Object(x.jsx)(H.a,{columnGap:3,rowGap:3,templateColumns:"repeat(auto-fit, minmax(15ex, 1fr))",children:J.azurMethods.map((function(e){return Object(x.jsx)(H.b,{children:Object(x.jsx)(q,{activeValue:j.a.get(t,n,[]),presetData:e.apiName,attributeName:n,setFieldValue:r,width:"100%",children:e.title})},e.apiName)}))})]})},L=n(102);function Y(e){var t=e.ParentStateUpdater,n=Object(y.e)(),r=n.values,a=n.errors,i=n.setFieldValue;return Object(x.jsxs)(y.c,{children:[Object(x.jsxs)(D.a,{flexDirection:"column",children:[Object(x.jsx)(M,{name:"numSeats",type:"number",errorMsg:null===a||void 0===a?void 0:a.numSeats,fontSize:"4xl",textAlign:"center",color:"black",width:"6ex",p:"1",py:"0",height:"auto"}),Object(x.jsx)(C.a,{label:"z.B. Zahl der Sitze, Redeminuten oder R\xe4ume, die Sie verteilen m\xf6chten",children:Object(x.jsxs)(_.a,{alignItems:"center",spacing:"1ex",children:[Object(x.jsx)(I.a,{fontSize:"xl",children:"Einheiten"}),Object(x.jsx)(L.a,{fontSize:"1.2rem"})]})})]}),Object(x.jsx)(f.a,{as:"h3",size:"xl",children:"Fraktionsst\xe4rken"}),Object(x.jsx)(K,{values:r,errors:a,setFieldValue:i,MAX_FRACTIONS:15,attributeKey:"partyStrengths"}),Object(x.jsx)(X,{values:r,setFieldValue:i,attributeKey:"method"}),Object(x.jsx)(t,{})]})}var Q=["azurInput","setAzurInput"];var $=function(e){var t=e.azurInput,n=e.setAzurInput,r=Object(g.a)(e,Q),a={numSeats:60,method:"schepers",partyStrengths:z[0].data},i=k.c().shape({numSeats:A,partyStrengths:E,method:F});return Object(x.jsxs)(v,Object(h.a)(Object(h.a)({},r),{},{children:[Object(x.jsx)(c.a,{children:Object(x.jsx)(f.a,{size:"2xl",children:"Filter"})}),Object(x.jsx)(y.d,{initialValues:a,validationSchema:i,validateOnChange:!1,validateOnBlur:!1,children:Object(x.jsx)(Y,{ParentStateUpdater:function(){var e=Object(y.e)(),r=e.values,a=e.validateForm;return Object(x.jsx)(w,{values:r,validateForm:a,inputData:t,setInputData:n})}})})]}))},ee=n(410),te=n(66);function ne(e,t,n){var r=te.c().domain([1,n]).range(["#333","#EEE"]),a=J.partyColors;return e in J.partyAltNamesMapping&&(e=J.partyAltNamesMapping[e]),e in a?a[e]:r(t)}var re=function(e){var t=e.data,n=e.outerRadius,a=e.innerRadius,i=2*n,s=2*n;return Object(r.useEffect)((function(){!function(){var e=Object.entries(t).map((function(e){var t=Object(l.a)(e,2);return{label:t[0],value:t[1]}}));te.d("#pie-container").select("svg").remove();var r=te.d("#pie-container").append("svg").attr("width",i).attr("height",s).append("g").attr("transform","translate(".concat(i/2,", ").concat(s/2,")")),c=te.a().innerRadius(a).outerRadius(n),o=te.b().padAngle(0).value((function(e){return e.value}));r.selectAll().data(o(e)).enter().append("path").attr("d",c).style("fill",(function(t,n){return ne(t.data.label,n,e.length)})).append("svg:title").text((function(e){return"".concat(e.data.label,"\n").concat(e.data.value)})).style("stroke","#ffffff").style("stroke-width",0)}()}),[t]),Object(x.jsx)(p.a,{id:"pie-container",display:"inline-block",width:"auto",m:1})},ae=n(400),ie=n(34);function se(e){var t=e.isAmbiguous,n=e.seatSplit,r=e.azurInput,a=Object(ie.e)().sizes,i=le(a[20]),s=le(a[56]),o=null===r||void 0===r?void 0:r.partyStrengths.map((function(e){return e.name})),u={};return o.forEach((function(e){u[e]=n[e]})),Object(x.jsxs)(c.a,{flexDirection:"column",children:[Object(x.jsx)(D.a,{my:"10",children:Object(x.jsxs)(ae.a,{size:"md",children:[Object(x.jsx)(ae.e,{children:Object(x.jsx)(ae.f,{children:Object.keys(u).map((function(e){return Object(x.jsxs)(ae.d,{children:[e," "]},e)}))})}),Object(x.jsx)(ae.b,{children:Object(x.jsx)(ae.f,{children:Object.entries(u).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(x.jsx)(ae.c,{children:Array.isArray(r)?r.join(" oder "):r},n)}))})})]})}),Object(x.jsx)(D.a,{children:t?Object(x.jsxs)(ee.a,{status:"warning",children:[Object(x.jsx)(ee.c,{}),Object(x.jsx)(ee.d,{mr:2,children:"Mehrdeutiges Ergebnis"}),Object(x.jsx)(ee.b,{children:"Es l\xe4sst sich kein eindeutiges Ergebnis f\xfcr diese Eingabe berechnen. Das hei\xdft, dass die Einheiten nicht eindeutig bestimmten Fraktionen zugewiesen werden k\xf6nnen. Es kann helfen eine andere mathematische Methode zu w\xe4hlen, oder diese Verteilungsgr\xf6\xdfe zu vermeiden."})]}):Object(x.jsx)(re,{data:u,outerRadius:s,innerRadius:i})})]})}function le(e){return parseFloat(e)*parseFloat(getComputedStyle(document.documentElement).fontSize)}var ce=n(401),oe=function(e){var t=e.cell;return Object(x.jsx)(c.a,{justifyContent:"center",children:Object(x.jsx)(p.b,{size:"3ex",bg:"brand.backgroundGrey",color:"black",children:Object(x.jsx)(I.a,{fontWeight:"bold",children:t.value})})})};var ue=function(e){var t=e.cell;return Object(x.jsx)(de,{cell:t})},de=function(e){var t=e.cell;if(null==(null===t||void 0===t?void 0:t.value))return"loading...";var n=t.value;return Array.isArray(n)?Object(x.jsxs)(p.a,{layerStyle:"ambiguityContainerHighlight",children:[Object(x.jsx)(I.a,{color:"brand.orange",children:"Mehrdeutig!"}),Object(x.jsx)(I.a,{children:be(n)})]}):j.a.has(t,"row.original.seat_goes_to")&&j.a.has(t,"column.Header")&&t.row.original.seat_goes_to==t.column.Header?Object(x.jsx)(p.a,{fontWeight:"bold",children:n}):n},be=function(e){return Array.isArray(e)?e.join(" oder "):e},je=function(e){var t,n=e.cell,r=e.row,a=null===n||void 0===n||null===(t=n.column)||void 0===t?void 0:t.partyName;if(r.original.is_identical)return Object(x.jsx)(de,{cell:n});var i,s,l=(null===(i=r.original.dist_A.seats)||void 0===i?void 0:i[a])||0,c=(null===(s=r.original.dist_B.seats)||void 0===s?void 0:s[a])||0;return l!=c?"".concat(be(l)," \u2192 ").concat(be(c)):l},he=n(394),ge=n(107);function fe(e){var t=e.column,n=t.filterValue,r=void 0===n?[]:n,i=t.preFilteredRows,s=t.setFilter,o=a.a.useMemo((function(){return[1,i.length]}),[i]),u=Object(l.a)(o,2),d=u[0],b=u[1];return Object(x.jsxs)(c.a,{align:"center",children:[Object(x.jsx)(B.a,{value:r[0]||"",type:"number",onChange:function(e){var t=e.target.value;s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t?parseInt(t,10):void 0,e[1]]}))},placeholder:"".concat(d),width:"8ex",mr:"1ex"}),"bis",Object(x.jsx)(B.a,{value:r[1]||"",type:"number",onChange:function(e){var t=e.target.value;s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?parseInt(t,10):void 0]}))},placeholder:"".concat(b),width:"8ex",ml:"1ex"})]})}var me=n(405),pe=n(402),xe=["pageOptions","gotoPage","state"],Oe=function(e){var t=e.pageOptions,n=e.gotoPage,r=e.state.pageIndex,a=Object(g.a)(e,xe);return Object(x.jsxs)(c.a,Object(h.a)(Object(h.a)({alignItems:"center"},a),{},{children:[Object(x.jsx)(I.a,{ml:2,flexShrink:"0",children:"Seite"}),Object(x.jsxs)(me.c,{w:"10.5ex",p:0,mx:2,min:1,max:t.length,onChange:function(e){n(e?e-1:0)},defaultValue:r+1,children:[Object(x.jsx)(me.d,{}),Object(x.jsxs)(me.e,{children:[Object(x.jsx)(me.b,{}),Object(x.jsx)(me.a,{})]})]}),Object(x.jsxs)(I.a,{mr:2,children:["von ",t.length]})]}))},ve=function(e){var t=e.pageSize,n=e.setPageSize;return Object(x.jsx)(c.a,{children:Object(x.jsx)(pe.a,{w:40,mr:2,value:t,onChange:function(e){n(Number(e.target.value))},children:[8,10,20,50,100].map((function(e){return Object(x.jsxs)("option",{value:e,children:[e," pro Seite"]},e)}))})})},ye=function(e){var t=e.getTableProps,n=e.getTableBodyProps,a=e.headerGroups,i=e.prepareRow,s=e.page,l=e.getRowProps,c=void 0===l?function(){return{}}:l;return Object(x.jsx)(p.a,{maxWidth:"100%",children:Object(x.jsxs)(ae.a,Object(h.a)(Object(h.a)({},t()),{},{variant:"stickyHeader",children:[Object(x.jsx)(ae.e,{children:a.map((function(e,t){return Object(x.jsx)(ae.f,Object(h.a)(Object(h.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(x.jsx)(ae.d,Object(h.a)(Object(h.a)({},e.getHeaderProps()),{},{children:e.render("Header")}),e.header)}))}),"headerGroup:".concat(t))}))}),Object(x.jsx)(ae.b,Object(h.a)(Object(h.a)({},n()),{},{children:s.map((function(e){return i(e),Object(x.jsx)(ae.f,Object(h.a)(Object(h.a)({},e.getRowProps(c(e))),{},{children:e.cells.map((function(t){var n;return Object(r.createElement)(ae.c,Object(h.a)(Object(h.a)({},t.getCellProps()),{},{key:(null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.id)+(null===e||void 0===e?void 0:e.id)}),t.render("Cell"))}))}),null===e||void 0===e?void 0:e.id)}))}))]}))})};function Se(e){var t=e.data,n=e.columns,r=e.getRowProps,i=void 0===r?function(){return{}}:r,s=a.a.useMemo((function(){return{disableFilters:!0}}),[]),l=[{Header:"",id:"index",accessor:function(e,t){return t+1},Cell:oe,disableFilters:!1,defaultCanFilter:!0,Filter:fe,filter:"between"}],c=a.a.useMemo((function(){return null==t?[]:t}),[t]),o=a.a.useMemo((function(){return null==n?[]:l.concat(n)}),[n]),u=Object(ge.useTable)({columns:o,data:c,defaultColumn:s},ge.useFilters,ge.usePagination),d=u.getTableProps,b=u.getTableBodyProps,j=u.headerGroups,h=u.prepareRow,g=u.page,f=u.pageOptions,m=u.gotoPage,p=u.setPageSize,O=u.state,v=O.pageIndex,y=O.pageSize;return a.a.useEffect((function(){p(20)}),[]),Object(x.jsx)(x.Fragment,{children:void 0==n||void 0==t?Object(x.jsx)(he.a,{}):Object(x.jsxs)(_.c,{maxWidth:"100%",children:[Object(x.jsx)(_.a,{maxWidth:"100%",children:Object(x.jsx)(ye,{getTableProps:d,getTableBodyProps:b,headerGroups:j,prepareRow:h,page:g,getRowProps:i})}),Object(x.jsxs)(_.a,{alignItems:"center",spacing:"3ex",children:[Object(x.jsx)(Oe,{pageOptions:f,gotoPage:m,state:{pageIndex:v,pageSize:y}}),Object(x.jsx)(ve,{pageSize:y,setPageSize:p})]})]})})}function we(e){var t=e.assignmentSequence,n=e.tableData,r=[{Header:"Zugriff",accessor:"seat_goes_to",disableFilters:!0,Cell:function(e){return function(e){var t=e.cell,n=e.tableData,r=null===t||void 0===t?void 0:t.value;if(Array.isArray(r))return"Mehrdeutig! "+be(r);var a=Object.keys(n[0].seats),i=a.length,s=a.findIndex((function(e){return e==r})),l=ne(r,s,i),o=function(e){return Object(x.jsx)(ce.a,Object(h.a)(Object(h.a)({viewBox:"0 0 200 200"},e),{},{children:Object(x.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}))};return Object(x.jsxs)(c.a,{align:"center",children:[Object(x.jsx)(I.a,{flex:1,textAlign:"center",children:r}),Object(x.jsx)(o,{color:l,mr:2,boxSize:12})]})}({cell:e.cell,tableData:n})}}];return Object(x.jsx)(Se,{data:t,columns:r})}function ze(e){var t=e.tableData,n=e.assignmentSequence,r=e.azurInput,a=[],i=[];null!=t&&Array.isArray(t)&&t.length>=1&&(a=(null===r||void 0===r?void 0:r.partyStrengths.map((function(e){return e.name}))).map((function(e){return{Header:e,accessor:"seats."+e,isNumeric:!0,Cell:ue}})),i=j.a.isEmpty(n)?t:t.map((function(e,t){return Object(h.a)({seat_goes_to:n[t].seat_goes_to},e)})));return Object(x.jsx)(Se,{data:i,columns:a,getRowProps:function(e){var t;return{layerStyle:(null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.is_ambiguous)?"ambigousRowHighlight":""}}})}var ke=n(180),Ae=function(e){var t=e.tableData,n=null;return null!=t&&(n=t.slice(0,400)),null!=n?Object(x.jsxs)(D.a,{flexDirection:"column",maxWidth:"100%",children:[Object(x.jsxs)(ae.a,{children:[Object(x.jsx)(ae.e,{children:Object(x.jsxs)(ae.f,{children:[Object(x.jsx)(ae.d,{children:"Position"}),Object.keys(n[0].seats).map((function(e){return Object(x.jsx)(ae.d,{children:e},e)}))]})}),Object(x.jsx)(ae.b,{children:n.map((function(e,t){return Object(x.jsxs)(ae.f,{children:[Object(x.jsx)(ae.c,{children:t+1}),Object.values(e.seats).map((function(e,n){return Object(x.jsx)(ae.c,{children:Array.isArray(e)?Object(x.jsxs)(p.a,{layerStyle:"ambiguityContainerHighlight",children:[Object(x.jsx)(I.a,{color:"brand.orange",children:"Mehrdeutig!"}),Object(x.jsx)(I.a,{children:be(e)})]}):Object(x.jsx)(p.a,{children:e})},"tablePrintRow".concat(t,"_").concat(n))}))]},"tablePrintRow".concat(t))}))})]}),t.length>=400&&Object(x.jsx)(I.a,{children:"Es kann nur eine begrenzte Anzahl an Zeilen gedruckt werden."})]}):"Loading"},Ee=a.a.forwardRef((function(e,t){var n=e.azurResponse,r=e.azurInput,a=null===n||void 0===n?void 0:n.table,i="";if(null!=(null===r||void 0===r?void 0:r.method)){var s,l=null===(s=J.azurMethods.find((function(e){return(null===e||void 0===e?void 0:e.apiName)==(null===r||void 0===r?void 0:r.method)})))||void 0===s?void 0:s.title;null!=l&&(i=l)}return Object(x.jsxs)(p.a,{p:3,ref:t,children:[Object(x.jsx)(f.a,{size:"xl",children:"Eingabe"}),Object(x.jsxs)(p.a,{children:[Object(x.jsx)(f.a,{size:"lg",children:"Verteilmasse"}),Object(x.jsx)(I.a,{children:null===r||void 0===r?void 0:r.numSeats}),Object(x.jsx)(f.a,{size:"lg",children:"Methode"}),Object(x.jsxs)(I.a,{children:[i," "]}),Object(x.jsx)(f.a,{size:"lg",children:"Fraktionsst\xe4rken"}),null!=r.partyStrengths&&Object(x.jsx)(ae.a,{children:Object(x.jsxs)(ae.b,{children:[Object(x.jsxs)(ae.f,{children:[Object(x.jsx)(ae.d,{children:"Name"}),null===r||void 0===r?void 0:r.partyStrengths.map((function(e){return Object(x.jsx)(ae.c,{children:e.name},"Name_".concat(e.name))}))]}),Object(x.jsxs)(ae.f,{children:[Object(x.jsx)(ae.d,{children:"St\xe4rke"}),null===r||void 0===r?void 0:r.partyStrengths.map((function(e){return Object(x.jsx)(ae.c,{children:e.strength},"St\xe4rke_".concat(e.strength))}))]})]})})]}),Object(x.jsx)(f.a,{size:"xl",children:"Ausgabetabelle"}),Object(x.jsx)(p.a,{children:Object(x.jsx)(Ae,{tableData:a})})]})})),Fe=function(e){var t=e.azurResponse,n=e.azurInput,a=Object(r.useRef)(),i=Object(ke.useReactToPrint)({content:function(){return a.current}});return Object(x.jsxs)(_.a,{spacing:"0",children:[Object(x.jsx)(T.a,{variant:"outline",onClick:i,children:Object(x.jsxs)(_.a,{spacing:"0.3rem",children:[Object(x.jsx)(L.b,{}),Object(x.jsx)(I.a,{fontWeight:"normal",fontSize:"sm",children:"Drucken"})]})}),Object(x.jsx)(p.a,{display:"none",children:Object(x.jsx)(Ee,{azurResponse:t,azurInput:n,ref:a})})]})},De=n(406);function Ce(e){var t=e.azurInput,n=e.azurResponse,r=e.loading;a.a.useEffect((function(){"hare"===t.method&&1===o&&u(0)}),[t]);var i=a.a.useState(0),s=Object(l.a)(i,2),o=s[0],u=s[1],d={color:"brand.darkBlue",boderColor:"brand.darkBlue",border:"1px solid",borderBottom:"none",boxShadow:"0px 2px 0px -1px white"};return Object(x.jsxs)(De.e,{mt:"10",align:"left",index:o,onChange:function(e){u(e)},children:[Object(x.jsxs)(c.a,{justifyContent:"space-between",alignItems:"end",children:[Object(x.jsxs)(De.b,{children:[Object(x.jsx)(De.a,{fontSize:"lg",_selected:d,children:"Anteile"}),Object(x.jsx)(De.a,{fontSize:"lg",_selected:d,title:"hare"===t.method?"Bei der mathematischen Berechnungsmethode Hare/Niemeyer entsteht keine Zugriffsreihenfolge. Probieren Sie eine andere Methode.":"Reihenfolge in der die einzelnen Einheiten an die Fraktionen vergeben werden.",isDisabled:"hare"===t.method,children:"Reihenfolge"}),Object(x.jsx)(De.a,{fontSize:"lg",_selected:d,title:"Tabellarische \xdcbersicht f\xfcr die Verteilmassen von 1 bis ".concat(t.numSeats),children:"Tabelle"})]}),Object(x.jsx)(Fe,{azurResponse:n,azurInput:t})]}),r?Object(x.jsx)(D.a,{minHeight:"40em",children:Object(x.jsx)(he.a,{size:"xl",color:"brand.orange"})}):Object(x.jsxs)(De.d,{children:[Object(x.jsx)(De.c,{children:Object(x.jsx)(se,{isAmbiguous:n.distribution.is_ambiguous,seatSplit:n.distribution.seats,azurInput:t})}),Object(x.jsx)(De.c,{children:Object(x.jsx)(we,{tableData:n.table,assignmentSequence:n.assignment_sequence})}),Object(x.jsx)(De.c,{children:Object(x.jsx)(ze,{tableData:n.table,assignmentSequence:n.assignment_sequence,azurInput:t})})]})]})}var _e=["azurInput","azurResponse","azurError","loading"];function Ie(e){var t=e.azurInput,n=e.azurResponse,r=e.azurError,a=e.loading,i=Object(g.a)(e,_e);return Object(x.jsxs)(v,Object(h.a)(Object(h.a)({},i),{},{variant:"organismWrapper",children:[Object(x.jsx)(f.a,{size:"2xl",children:"Verteilung"}),Object(x.jsx)(c.a,{flexDirection:"column",children:j.a.isEmpty(t.errors)?null!=r?Object(x.jsxs)(ee.a,{status:"error",children:[Object(x.jsx)(ee.c,{}),Object(x.jsx)(ee.d,{mr:2,children:"Fehler bei der Berechnung"}),Object(x.jsxs)(ee.b,{children:["Es ist ein Fehler bei der Berechnung aufgetreten:"," ",r.message]})]}):Object(x.jsx)(Ce,{azurResponse:n,azurInput:t.data,loading:a}):Object(x.jsxs)(ee.a,{status:"error",children:[Object(x.jsx)(ee.c,{}),Object(x.jsx)(ee.d,{mr:2,children:"Ung\xfcltige Eingabe!"}),Object(x.jsxs)(ee.b,{children:[null!=t.errors.numSeats&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(I.a,{mt:3,fontWeight:"bold",children:"Fehler bei der Eingabe der Einheiten"}),Object(x.jsx)(I.a,{children:t.errors.numSeats})]}),null!=t.errors.partyStrengths&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(I.a,{mt:3,fontWeight:"bold",children:"Fehler bei der Eingabe der Fraktionsst\xe4rken"}),"string"===typeof t.errors.partyStrengths?Object(x.jsx)(I.a,{children:t.errors.partyStrengths}):t.errors.partyStrengths.map((function(e,t){return e.strength?Object(x.jsx)(I.a,{children:e.strength},t+"strengthError"):Object(x.jsx)(I.a,{children:e.name},t+"nameError")}))]})]})]})})]}))}function Be(){var e=a.a.useState({data:{},errors:{}}),t=Object(l.a)(e,2),n=t[0],r=t[1],i=function(e){var t=a.a.useState({}),n=Object(l.a)(t,2),r=n[0],i=n[1],s=a.a.useState(!0),c=Object(l.a)(s,2),o=c[0],b=c[1],h=a.a.useState(null),g=Object(l.a)(h,2),f=g[0],m=g[1],p=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),n={},t.partyStrengths.forEach((function(e){n[e.name]=e.strength})),fetch("https://azur-api.herokuapp.com/azur",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes:n,method:t.method,num_of_seats:t.num_of_seats,return_table:!0})}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,null==(r=null===n||void 0===n?void 0:n.message)&&(r="An unexpected error occured"),new Error(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){m(null),i(e)})).catch((function(e){i(null),console.log(e),m(e)})).finally((function(){b(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.useEffect((function(){j.a.isEmpty(null===e||void 0===e?void 0:e.errors)&&"partyStrengths"in(null===e||void 0===e?void 0:e.data)&&p(e.data)}),[e]),{data:r,loading:o,error:f}}(n),s=i.data,o=i.loading,b=i.error;return Object(x.jsxs)(c.a,{flexDirection:["column","column","column","row"],height:["auto","auto","auto","100%"],width:["auto","auto","auto","90vw"],margin:["0","0","0","0 auto"],children:[Object(x.jsx)($,{azurInput:n,setAzurInput:r,maxHeight:"100%",width:["100%","100%","100%","35%"]}),Object(x.jsx)(Ie,{azurInput:n,azurResponse:s,azurError:b,loading:o,maxHeight:"100%",width:["100%","100%","100%","65%"]})]})}function Re(e){var t=e.ParentStateUpdater,n=Object(y.e)(),r=n.values,a=n.errors,i=n.setFieldValue;return Object(x.jsxs)(y.c,{children:[Object(x.jsxs)(D.a,{flexDirection:"column",children:[Object(x.jsx)(M,{name:"numSeats",type:"number",errorMsg:null===a||void 0===a?void 0:a.numSeats,fontSize:"4xl",textAlign:"center",color:"brand.darkBlue",width:"6ex",height:"auto"}),Object(x.jsx)(I.a,{fontSize:"xl",children:"Einheiten"})]}),Object(x.jsx)(c.a,{justifyContent:"center",children:["dist_A","dist_B"].map((function(e){return Object(x.jsxs)(v,{p:"2",children:[Object(x.jsx)(f.a,{size:"xl",children:"dist_A"===e?"Ausgangsverteilung":"Vergleichsverteilung"}),Object(x.jsx)(K,{values:r,errors:a,setFieldValue:i,MAX_FRACTIONS:15,attributeKey:"".concat(e,".partyStrengths")}),Object(x.jsx)(X,{values:r,setFieldValue:i,attributeKey:"".concat(e,".method")})]},e)}))}),Object(x.jsx)(t,{})]})}var Ne=["azurCompareInput","setAzurCompareInput"];var Pe=function(e){var t=e.azurCompareInput,n=e.setAzurCompareInput,r=Object(g.a)(e,Ne),a={numSeats:60,dist_A:{method:"schepers",partyStrengths:z[0].data},dist_B:{method:"schepers",partyStrengths:z[1].data}},i=k.c().shape({numSeats:A,dist_A:k.c().shape({partyStrengths:E,method:F}),dist_B:k.c().shape({partyStrengths:E,method:F})});return Object(x.jsx)(v,Object(h.a)(Object(h.a)({},r),{},{children:Object(x.jsx)(y.d,{initialValues:a,validationSchema:i,validateOnChange:!1,validateOnBlur:!1,children:Object(x.jsx)(Re,{ParentStateUpdater:function(){var e=Object(y.e)(),r=e.values,a=e.validateForm;return Object(x.jsx)(w,{values:r,validateForm:a,inputData:t,setInputData:n})}})})}))},Me=n(9);function Ve(e){var t,n,r=e.tableData,a=[],i=[];null!=r&&Array.isArray(r)&&r.length>=1&&(a=Object(Me.a)(new Set([].concat(Object(Me.a)(Object.keys(r[0].dist_A.seats)),Object(Me.a)(Object.keys((null===(t=r[0])||void 0===t||null===(n=t.dist_B)||void 0===n?void 0:n.seats)||{}))))).map((function(e){return{Header:e,partyName:e,accessor:"dist_A.seats."+e,isNumeric:!0,Cell:je}})),i=r);return Object(x.jsx)(Se,{data:i,columns:a,getRowProps:function(e){var t;return(null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.is_identical)?{}:{layerStyle:"changedRowHighlight"}}})}var He=["data","error","loading"],Ge=function(e){var t=e.data,n=e.error,r=e.loading,a=Object(g.a)(e,He),i="unbekannt",s="unbekannt",l="unbekannt";return void 0!=(null===t||void 0===t?void 0:t.table)&&(i=t.table.filter((function(e){return!e.is_identical})).length,l=(s=null===t||void 0===t?void 0:t.table.length)-i),Object(x.jsxs)(v,Object(h.a)(Object(h.a)({},a),{},{children:[Object(x.jsx)(f.a,{size:"2xl",children:"Ergebnis"}),r?Object(x.jsx)(D.a,{minHeight:"40em",children:Object(x.jsx)(he.a,{size:"xl",color:"brand.orange"})}):Object(x.jsx)(p.a,{bg:"white",children:j.a.isEmpty(n)?Object(x.jsxs)(D.a,{flexDirection:"column",children:[Object(x.jsxs)(p.a,{textAlign:"center",p:"3",px:"20",fontSize:"xl",children:[Object(x.jsx)(I.a,{d:"inline",fontWeight:"bold",children:i})," ","von"," ",Object(x.jsx)(I.a,{d:"inline",fontWeight:"bold",children:s})," ","Zeilen haben sich ge\xe4ndert,"," ",Object(x.jsx)(I.a,{d:"inline",fontWeight:"bold",children:l})," ","sind gleich geblieben."]}),Object(x.jsx)(Ve,{tableData:null===t||void 0===t?void 0:t.table,assignmentSequence:null===t||void 0===t?void 0:t.assignment_sequence})]}):Object(x.jsxs)(ee.a,{status:"error",children:[Object(x.jsx)(ee.c,{}),Object(x.jsx)(ee.d,{mr:2,children:"Ung\xfcltige Eingabe!"}),Object(x.jsx)(ee.b,{children:n.message})]})})]}))};function Te(){var e=a.a.useState({data:{},errors:{}}),t=Object(l.a)(e,2),n=t[0],r=t[1],i=function(e){var t=a.a.useState({}),n=Object(l.a)(t,2),r=n[0],i=n[1],s=a.a.useState(!0),c=Object(l.a)(s,2),o=c[0],b=c[1],h=a.a.useState(null),g=Object(l.a)(h,2),f=g[0],m=g[1],p=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),a={num_of_seats:t.num_of_seats,dist_A:{votes:{},method:null===t||void 0===t||null===(n=t.dist_A)||void 0===n?void 0:n.method},dist_B:{votes:{},method:null===t||void 0===t||null===(r=t.dist_B)||void 0===r?void 0:r.method}},["dist_A","dist_B"].forEach((function(e){var n;null===t||void 0===t||null===(n=t[e])||void 0===n||n.partyStrengths.forEach((function(t){a[e].votes[t.name]=t.strength}))})),fetch("https://azur-api.herokuapp.com/azur_compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.abrupt("return",t.json());case 4:return n="",e.prev=5,e.next=8,t.json();case 8:r=e.sent,n=null!=(null===r||void 0===r?void 0:r.message)?r.message:"Unexpected error: Error notification was returned from the server but contained no message.",n=null===r||void 0===r?void 0:r.message,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),n="An unexpected error occured and no proper respone from the server was returned.";case 16:throw new Error(n);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){m(null),i(e)})).catch((function(e){console.log(e),i({}),m({message:null===e||void 0===e?void 0:e.message})})).finally((function(){b(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.useEffect((function(){j.a.isEmpty(null===e||void 0===e?void 0:e.errors)&&j.a.has(e,"data.dist_A.partyStrengths")&&p(e.data)}),[e]),{data:r,loading:o,error:f}}(n),s=i.data,o=i.error,b=i.loading;return Object(x.jsxs)(c.a,{flexDirection:["column","column","column","row"],height:["auto","auto","auto","100vh"],width:"100vw",margin:"0",children:[Object(x.jsx)(Pe,{azurCompareInput:n,setAzurCompareInput:r,width:["100%","100%","100%","50%"]}),Object(x.jsx)(Ge,{data:s,error:o,loading:b,maxHeight:"100%",width:["100%","100%","100%","50%"]})]})}var Ue=n(181),We=n(20);var qe=function(){return Object(x.jsx)(p.a,{className:"App",children:Object(x.jsx)(Ue.a,{children:Object(x.jsx)(p.a,{height:"100vh",children:Object(x.jsxs)(We.c,{children:[Object(x.jsx)(We.a,{exact:!0,path:"/",children:Object(x.jsx)(Be,{})}),Object(x.jsx)(We.a,{exact:!0,path:"/compare",children:Object(x.jsx)(Te,{})})]})})})})},Ke=(n(368),n(369),n(39)),Ze=function(){return Object(x.jsx)(Ke.a,{styles:"\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'normal';\n        font-style: 'italic';\n        src: url('fonts/BundesSansOffice-Italic.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'normal';\n        src: url('fonts/BundesSansOffice.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'bold';\n        font-style: 'italic';\n        src: url('fonts/BundesSansOffice-BoldItalic.ttf');\n      }\n      @font-face {\n        font-family: 'BundesSans';\n        font-weight: 'bold';\n        src: url('fonts/BundesSansOffice-Bold.ttf');\n      }\n    "})},Je=n(403),Xe={baseStyle:{table:{display:"inline-block",maxWidth:"100%",width:"auto",overflowX:"auto",borderCollapse:"collapse"},th:{color:"brand.primary",textAlign:"center",textTransform:"none"},td:{textAlign:"center",fontWeight:"normal"}},sizes:{md:{table:{fontSize:"md"},td:{fontSize:"md"},th:{fontSize:"md"}},lg:{table:{fontSize:"lg"},td:{fontSize:"lg"},th:{fontSize:"lg"}}},variants:{stickyHeader:{table:{height:"55vh",overflow:"auto"},thead:{position:"sticky",top:"0",backgroundColor:"white"}}},defaultProps:{size:"md"}},Le=Object(Je.a)({components:{Button:{baseStyle:{margin:"1",padding:"1.5em",whiteSpace:"normal",wordWrap:"break-word",borderRadius:"none",fontWeight:"normal"},variants:{active:{backgroundColor:"brand.orangeAlpha.600",border:"1px solid",borderColor:"brand.orange",fontWeight:"bold"}}},Input:{parts:["field"],baseStyle:{field:{margin:"1",my:0,py:"1",px:"4",backgroundColor:"white",outline:"1px solid",outlineColor:"brand.darkBlueAlpha.200",border:"none"}},variants:{fakeInput:{field:{pointerEvents:"none"}}},defaultProps:{size:"",variant:""}},Heading:{baseStyle:{color:"brand.primary",fontWeight:"regular"},sizes:{lg:{fontSize:"lg",mt:"5",mb:"3"},xl:{fontSize:"xl",mt:"7",mb:"3",color:"brand.darkBlue"},"2xl":{fontSize:"2xl",mt:"7",mb:"3",color:"brand.darkBlue"}}},Tabs:{parts:["tabpanel","tab"],baseStyle:{tabpanel:{bg:"white",my:0,border:"1px solid",borderColor:"brand.darkBlue"},tab:{bg:"white",p:3}},variants:{}},Card:{baseStyle:{backgroundColor:"brand.backgroundGrey",borderRadius:"lg",m:3,p:"10",py:"2",overflowY:"auto"},variants:{ghost:{backgroundColor:"transparent"}}},Table:Xe},colors:{brand:{primary:"#4A5568",orange:"#FF7100",orangeAlpha:{50:"rgba(255, 133, 0, 0.02)",100:"rgba(255, 133, 0, 0.04)",200:"rgba(255, 133, 0, 0.08)",300:"rgba(255, 133, 0, 0.16)",400:"rgba(255, 133, 0, 0.24)",500:"rgba(255, 133, 0, 0.36)",600:"rgba(255, 133, 0, 0.48)",700:"rgba(255, 133, 0, 0.64)",800:"rgba(255, 133, 0, 0.80)"},darkBlue:"#3396B6",darkBlueAlpha:{50:"rgba(51, 150, 182, 0.02)",100:"rgba(51, 150, 182, 0.04)",200:"rgba(51, 150, 182, 0.08)",300:"rgba(51, 150, 182, 0.16)",400:"rgba(51, 150, 182, 0.24)",500:"rgba(51, 150, 182, 0.36)",600:"rgba(51, 150, 182, 0.48)",700:"rgba(51, 150, 182, 0.64)",800:"rgba(51, 150, 182, 0.80)"},backgroundGrey:"#EDF2F7"}},fonts:{heading:"BundesSans",body:"Open Sans"},fontSizes:{xs:"0.6rem",sm:"0.8rem",md:"1rem",lg:"1.1rem",xl:"1.6rem","2xl":"2rem","3xl":"2.3rem","4xl":"3rem","5xl":"4rem"},layerStyles:{errorGlow:{outline:"1px solid #E53E3E",boxShadow:"0 0 10px #E53E3E"},ambiguityContainerHighlight:{},changedRowHighlight:{backgroundColor:"brand.orangeAlpha.300"},ambigousRowHighlight:{backgroundColor:"brand.orangeAlpha.300"}}}),Ye=n(407);s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsxs)(Ye.a,{resetCSS:!0,theme:Le,children:[Object(x.jsx)(Ze,{}),Object(x.jsx)(qe,{})]})}),document.getElementById("root"))},58:function(e){e.exports=JSON.parse('{"azurMethods":[{"apiName":"schepers","title":"Sainte-Lagu\xeb/Schepers","default":true},{"apiName":"dhondt","title":"D\'Hondt"},{"apiName":"hare","title":"Hare-Niemeyer"}],"partyColors":{"CDU/CSU":"#000000","SPD":"#E3000F","AfD":"#0489DB","FDP":"#FFEF00","Die Linke":"#E9009E","DIE GR\xdcNEN":"#1AA037"},"partyAltNamesMapping":{"Union":"CDU/CSU","CDU":"CDU/CSU","Die Gr\xfcnen":"DIE GR\xdcNEN","B\xfcndnis 90/Die Gr\xfcnen":"DIE GR\xdcNEN"}}')},62:function(e){e.exports=JSON.parse('[{"key":"btwCurrent","title":"Aktueller Bundestag","label":"Die aktuelle Sitzverteilung im Bundestag -letzte Aktualisierung am 25.10.2021","data":[{"name":"SPD","strength":206},{"name":"CDU/CSU","strength":197},{"name":"B\xfcndnis 90/Die Gr\xfcnen","strength":118},{"name":"FDP","strength":92},{"name":"AfD","strength":82},{"name":"Die Linke","strength":39}]},{"key":"btw2017","title":"Bundestagswahl 2017","data":[{"name":"CDU/CSU","strength":246},{"name":"SPD","strength":153},{"name":"AfD","strength":94},{"name":"FDP","strength":80},{"name":"Die Linke","strength":69},{"name":"B\xfcndnis 90/Die Gr\xfcnen","strength":67}]}]')}},[[370,1,2]]]);
//# sourceMappingURL=main.e40b2c62.chunk.js.map